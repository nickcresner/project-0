"use strict";$(function(){console.log("JS Loaded");var o=$(".map"),t=$(".welcome"),e=$(".start-game-button"),n=$(".question"),a=$(".round-question"),i=$(".start-round-button"),l=$(".player-one-flag"),s=$(".player-two-flag"),c=$(".player-twos-turn"),r=$(".player-twos-turn-button"),h=$(".answer-location"),u=$(".end-of-round"),g=$(".p1-distance-away"),p=$(".p2-distance-away"),d=$(".player-1-score"),f=$(".player-2-score"),y=$(".next-round-button"),w=$(".end-of-game"),m=$(".winner"),x=0,L=0,M=0,k=0,T=!0,b=0,v=0,P=0,q=0,C=0,O=!1,S=0,X=0,Y="",A={name:"The O2 Centre",xLocation:82,yLocation:58},B={name:"Buckingham Palace",xLocation:28,yLocation:61},G={name:"Kings Cross Station",xLocation:33,yLocation:32},J={name:"General Assembly",xLocation:54,yLocation:45},K=[A,B,G,J],j=K[b].name;setTimeout(function(){t.show()},1e3),e.on("click",function(){console.log(t),t.hide(),setTimeout(function(){a.text(j),console.log(j),n.show()},500)}),i.on("click",function(){n.hide(),O=!0}),o.on("click",function(t){if(!0===O)if(!0===T){x=t.pageX-$(t.target).position().left,L=t.pageY-$(t.target).position().top;var e=x/o.width()*100,n=L/o.height()*100;console.log(e),console.log(n);var a=e-K[b].xLocation,i=n-K[b].yLocation;v=Math.floor(Math.sqrt(Math.pow(a,2)+Math.pow(i,2))),l.css({left:e+"%",top:n+"%",display:"inline"}),c.show(),O=!1,T=!1}else if(!1===T){M=t.pageX-$(t.target).position().left,k=t.pageY-$(t.target).position().top;var r=Math.round(M/o.width()*100),y=Math.round(k/o.height()*100);console.log(r),console.log(y);var w=r-K[b].xLocation,m=y-K[b].yLocation;P=Math.floor(Math.sqrt(Math.pow(w,2)+Math.pow(m,2))),s.css({left:r+"%",top:y+"%",display:"inline"}),v<P?(console.log("player 1 wins this round!"),S++):v===P?console.log("its a tie!"):(console.log("player 2 wins this round!"),X++),q=1e3/6*v,C=1e3/6*P,console.log("Player 1 clicked "+q+"m away from the target"),console.log("Player 2 clicked "+C+"m away from the target"),setTimeout(function(){h.css({left:K[b].xLocation-$(t.target).position().left+"%",top:K[b].yLocation-$(t.target).position().top+"%",display:"inline"})},1e3),setTimeout(function(){O=!1,u.show(),q=Math.round(q),C=Math.round(C),console.log(q),console.log(C),g.html(q),p.html(C),d.text(S),f.text(X)},2e3)}}),r.on("click",function(){O=!0,c.hide()}),y.on("click",function(){u.hide(),h.hide(),l.hide(),s.hide(),b++,console.log(b),j=K[b].name,T=!0,a.text(j),3===b?(w.show(),d.text(S),f.text(X),Y=S>X?"Player One":"Player Two",m.text(Y)):setTimeout(function(){n.css({display:"inline"})},500)})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwiY29uc29sZSIsImxvZyIsIiRtYXAiLCIkc3RhcnRHYW1lQnV0dG9uIiwiJHdlbGNvbWUiLCIkcXVlc3Rpb24iLCIkcm91bmRRdWVzdGlvbiIsIiRzdGFydFJvdW5kQnV0dG9uIiwiJHBsYXllcjFGbGFnIiwiJHBsYXllcjJGbGFnIiwiJHBsYXllcjJzVHVybiIsIiRwbGF5ZXIyc1R1cm5CdXR0b24iLCIkYW5zd2VyTG9jYXRpb24iLCIkZW5kT2ZSb3VuZCIsIiRwMURpc3RhbmNlQXdheSIsIiRwMkRpc3RhbmNlQXdheSIsIiRwbGF5ZXIxU2NvcmUiLCIkcGxheWVyMlNjb3JlIiwiJG5leHRSb3VuZEJ1dHRvbiIsIiR3aW5uZXIiLCJwbGF5ZXIxQ2xpY2tZIiwicGxheWVyMUNsaWNrWCIsInBsYXllcjJDbGlja1giLCJwbGF5ZXIyQ2xpY2tZIiwicGxheWVyMVR1cm4iLCJyb3VuZE51bWJlciIsInBsYXllcjFIeXBvdGVudXNlIiwicGxheWVyMkh5cG90ZW51c2UiLCJwbGF5ZXIxRGlzdGFuY2VGcm9tVGFyZ2V0SW5NIiwibWFwUGxheWFibGUiLCJwbGF5ZXJUd29TY29yZSIsImtpbmdzQ3Jvc3NPYmoiLCJuYW1lIiwieExvY2F0aW9uIiwieUxvY2F0aW9uIiwiZ2VuZXJhbEFzc2VtT2JqIiwicXVlc3Rpb25zQXJyYXkiLCJvMkNlbnRyZU9iaiIsImJ1Y2tpbmdoYW1QYWxhY2VPYmoiLCJyb3VuZFF1ZXN0aW9uTmFtZSIsInNldFRpbWVvdXQiLCJzaG93Iiwib24iLCJoaWRlIiwidGV4dCIsImUiLCJwbGF5ZXIxQ2xpY2tYUGVyY2VudE9mV2luZG93IiwicGFnZVgiLCJ0YXJnZXQiLCJwb3NpdGlvbiIsImxlZnQiLCJwbGF5ZXIxZGlzdGFuY2VUb1RhcmdldFgiLCJ3aWR0aCIsInNxcnQiLCJwbGF5ZXIxQ2xpY2tZUGVyY2VudE9mV2luZG93IiwicGxheWVyMWRpc3RhbmNlVG9UYXJnZXRZIiwiTWF0aCIsImZsb29yIiwicG93IiwidG9wIiwiZGlzcGxheSIsInBsYXllcjJDbGlja1lQZXJjZW50T2ZXaW5kb3ciLCJwbGF5ZXIyZGlzdGFuY2VUb1RhcmdldFgiLCJwbGF5ZXIyQ2xpY2tYUGVyY2VudE9mV2luZG93Iiwicm91bmQiLCJoZWlnaHQiLCJwbGF5ZXIyZGlzdGFuY2VUb1RhcmdldFkiLCJwbGF5ZXIyRGlzdGFuY2VGcm9tVGFyZ2V0SW5NIiwiaHRtbCIsInBsYXllck9uZVNjb3JlIiwiJGVuZE9mR2FtZSIsIndpbm5lciIsImNzcyJdLCJtYXBwaW5ncyI6IllBQUFBLEdBQUUsV0FDQUMsUUFBUUMsSUFBSSxZQUFaRCxJQUFBQSxHQUFZRCxFQUFBLFFBRU5HLEVBQVNILEVBQUYsWUFHUEksRUFBbUJKLEVBQUUsc0JBRHJCSyxFQUFhTCxFQUFBLGFBQ2JJLEVBQW1CSixFQUFFLG1CQUNyQk0sRUFBY04sRUFBQSx1QkFDZE8sRUFBaUJQLEVBQUUsb0JBQ25CUSxFQUFBQSxFQUFBQSxvQkFDQUMsRUFBaUJULEVBQUEscUJBQ2pCVSxFQUFpQlYsRUFBQSw0QkFDakJXLEVBQWtCWCxFQUFBLG9CQUNsQlksRUFBQUEsRUFBQUEsaUJBQ0FDLEVBQW9CYixFQUFBLHFCQUNwQmMsRUFBZ0JkLEVBQUEscUJBQ2hCZSxFQUFrQmYsRUFBRSxtQkFDcEJnQixFQUFrQmhCLEVBQUUsbUJBQ3BCaUIsRUFBa0JqQixFQUFBLHNCQUNsQmtCLEVBQUFBLEVBQWdCbEIsZ0JBQ2hCbUIsRUFBQUEsRUFBQUEsV0FFQUMsRUFBWSxFQUdkQyxFQUFnQixFQURoQkMsRUFBZ0IsRUFDaEJELEVBQWdCLEVBQ2hCRSxHQUFBQSxFQUNBQyxFQUFBQSxFQUNBQyxFQUFKLEVBQ0lDLEVBQUosRUFDSUMsRUFBSixFQUNJQyxFQUFKLEVBQ0lDLEdBQUFBLEVBRUFDLEVBQWMsRUFHZEMsRUFBaUIsRUFBakJBLEVBQUFBLEdBYUVDLEdBQWdCQyxLQUFDQSxnQkFBTUMsVUFBdUJBLEdBQUFBLFVBQWVDLElBQzdEQyxHQUFtQkgsS0FBTSxvQkFBb0JDLFVBQWVDLEdBQUFBLFVBQWxFLElBQ01FLEdBQWtCQyxLQUFBQSxzQkFBYUMsVUFBcUJQLEdBQUFBLFVBQWVJLElBRG5FQSxHQUFtQkgsS0FBTSxtQkFBb0JDLFVBQVcsR0FBSUMsVUFBVyxJQUd6RUssR0FBcUJILEVBQUFBLEVBQXpCTCxFQUFBSSxHQUdBSSxFQUFBSCxFQUFBWCxHQUFBTyxJQUVBUSxZQUFXLFdBSVhwQyxFQUFBcUMsUUFGRyxLQUlIdEMsRUFBaUJ1QyxHQUFHLFFBQVMsV0FJM0IxQyxRQUFBQyxJQUFBRyxHQUZBQSxFQUFTdUMsT0FPUDNDLFdBQVFDLFdBSFZLLEVBQUFzQyxLQUFBTCxHQU5GdkMsUUFBQUMsSUFBQXNDLEdBVUlsQyxFQUFVb0MsUUFLZCxPQUNBbEMsRUFBa0JtQyxHQUFHLFFBQVMsV0FVOUJyQyxFQUFBc0MsT0FSRWQsR0FBYyxJQXdCVjNCLEVBQUF3QyxHQUFBLFFBQUEsU0FBQUcsR0FDQSxJQUFNQyxJQUFOakIsRUFURixJQUFvQixJQUFoQkwsRUFBc0IsQ0FLeEJILEVBQWdCd0IsRUFBRUUsTUFBUWhELEVBQUU4QyxFQUFFRyxRQUFRQyxXQUFXQyxLQWFqRDlCLEVBQU0rQixFQUFBQSxNQUFBQSxFQUFBQSxFQUFBQSxRQUE0QkwsV0FBQUEsR0FUbEMsSUFBTUEsR0FBZ0N6QixFQUFnQm5CLEVBQUtrRCxRQUFTLElBZXBFMUIsRUFBb0MyQixFQUFjRixFQUFBQSxTQUFBQSxHQUcxRG5ELFNBQUFDLElBQUE2QyxHQWRROUMsUUFBUUMsSUFBSXFELEVBZ0JLLElBQWpCSCxHQUFBTCxFQUFBVixFQUFBWCxHQUFBUSxVQVJNc0IsRUFBMkJELEVBQStCbEIsRUFBZVgsR0FBYVMsU0FrQjVGVixHQUFBZ0MsS0FBQUMsTUFBQUQsS0FBQUgsS0FBQUcsS0FBQUUsSUFBQVAsRUFBQSxHQUFBSyxLQUFBRSxJQUFBSCxFQUFBLEtBTUFoQyxFQUFBQSxLQWZFMkIsS0FBUUosRUFBK0IsSUFpQnpDYSxJQUFBTCxFQUFBLElBZkVNLFFBQVcsV0FxQmI1RCxFQUFZNkQsT0FmWmhDLEdBQWMsRUFrQmRMLEdBQUEsTUFFTXNDLEtBQUFBLElBQUFBLEVBQTRCQyxDQWRsQ3pDLEVBQWdCdUIsRUFBRUUsTUFBUWhELEVBQUU4QyxFQUFFRyxRQUFRQyxXQUFXQyxLQWtCakR2QixFQUFBQSxFQUFBQSxNQUF5QjhCLEVBQUFBLEVBQUxULFFBQWdCSyxXQUFLTSxHQUl6QyxJQUFBSSxHQUFBUCxLQUFBUSxNQUFBMUMsRUFBQXBCLEVBQUFrRCxRQUFBLEtBQ0EzQyxFQUFpQitDLEtBQUFRLE1BQUF6QyxFQUFBckIsRUFBQStELFNBQUEsSUFFZmpFLFNBQUFDLElBQU80RCxHQUNQN0QsUUFBQUMsSUFBQTRELEVBS0E3RCxJQUFBQSxHQUFZK0QsRUFBWjNCLEVBQUFYLEdBQUFRLFVBREZpQyxFQUl1QnZDLEVBQW1CUyxFQUFBWCxHQUFBUyxTQUV6Q1AsR0FBTTZCLEtBQUFDLE1BQUFELEtBQUFILEtBQUFHLEtBQUFFLElBQUFJLEVBQUEsR0FBQU4sS0FBQUUsSUFBQVEsRUFBQSxLQUtQdEMsRUFBQUEsS0FDQXVDLEtBQUFBLEVBQStCLElBakI3QlIsSUFBT0UsRUFBK0IsSUFtQnhDN0QsUUFBWSxXQU9wQjBCLEVBQUFDLEdBcEJVM0IsUUFBUUMsSUFBSSw2QkFzQmR1QyxLQUVJZCxJQUFTVSxFQUNUcEMsUUFBQUMsSUFBUW1DLGVBRlVwQyxRQUFwQkMsSUFBQSw2QkFERjZCLEtBU0FVLEVBQWtCLElBQUEsRUFBQWQsRUFDaEJHLEVBQUEsSUFBQSxFQUFBRixFQW5CRjNCLFFBQVFDLElBQUksb0JBQXNCMkIsRUFBK0IsMEJBdUIvRHVDLFFBQUFBLElBQUFBLG9CQUErQlgsRUFBV1csMEJBZDVDM0IsV0FBWSxXQXNCVnhCLEVBQWM0QixLQUNkM0IsS0FBQUEsRUFBbUJhLEdBQW5CRyxVQUFBbEMsRUFBQThDLEVBQUFHLFFBQUFDLFdBQUFDLEtBQUEsSUFHQ1MsSUFqQkh2QixFQUFBWCxHQUFBUyxVQUFBbkMsRUFBQThDLEVBQUFHLFFBQUFDLFdBQUFVLElBQUEsSUFMSUMsUUFBVyxZQUVaLEtBMUdUcEIsV0FBQSxXQThHUVgsR0FBYyxFQWtDdEJsQixFQUFvQitCLE9BRWxCaEMsRUFBQThDLEtBQUFRLE1BQUFwQyxHQUZGdUMsRUFBQVgsS0FBQVEsTUFBQUcsR0FPRm5FLFFBQUFDLElBQUEyQixHQUNFVixRQUFBQSxJQUFvQmlELEdBRWxCdEQsRUFBQXVELEtBQUF4QyxHQUNBaEIsRUFBQXdELEtBQUFELEdBRUExRCxFQUFBbUMsS0FBQXlCLEdBbENNcEQsRUFBYzJCLEtBQUtkLElBdUN6QlMsUUFtQklsQyxFQUFjcUMsR0FBQSxRQUFBLFdBQ1piLEdBQUEsRUFEWW5CLEVBQWRpQyxTQWNSekIsRUFBQXdCLEdBQUEsUUFBQSxXQUVBN0IsRUFBQThCLE9BQ0EvQixFQUFBK0IsT0FDQW5DLEVBQUFtQyxPQUNBbEMsRUFBQWtDLE9BeENJbEIsSUFDQXpCLFFBQVFDLElBQUl3QixHQUNaYyxFQUFxQkgsRUFBZVgsR0FBY08sS0FDbERSLEdBQWMsRUFDZGxCLEVBQWVzQyxLQUFLTCxHQUVBLElBQWhCZCxHQUNGNkMsRUFBVzdCLE9BQ1h6QixFQUFjNEIsS0FBS3lCLEdBQ25CcEQsRUFBYzJCLEtBQUtkLEdBR2pCeUMsRUFERUYsRUFBaUJ2QyxFQUNWLGFBRUEsYUFFWFgsRUFBUXlCLEtBQUsyQixJQUliL0IsV0FBWSxXQUNWbkMsRUFBVW1FLEtBQ1JaLFFBQVcsWUFFWiIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKCgpID0+IHtcbiAgY29uc29sZS5sb2coJ0pTIExvYWRlZCcpO1xuXG4gIGNvbnN0ICRtYXAgPSAkKCcubWFwJyk7XG5cbiAgY29uc3QgJHdlbGNvbWUgPSAkKCcud2VsY29tZScpO1xuICBjb25zdCAkc3RhcnRHYW1lQnV0dG9uID0gJCgnLnN0YXJ0LWdhbWUtYnV0dG9uJyk7XG4gIGNvbnN0ICRxdWVzdGlvbiA9ICQoJy5xdWVzdGlvbicpO1xuICBjb25zdCAkcm91bmRRdWVzdGlvbiA9ICQoJy5yb3VuZC1xdWVzdGlvbicpO1xuICBjb25zdCAkc3RhcnRSb3VuZEJ1dHRvbiA9ICQoJy5zdGFydC1yb3VuZC1idXR0b24nKTtcbiAgY29uc3QgJHBsYXllcjFGbGFnID0gJCgnLnBsYXllci1vbmUtZmxhZycpO1xuICBjb25zdCAkcGxheWVyMkZsYWcgPSAkKCcucGxheWVyLXR3by1mbGFnJyk7XG4gIGNvbnN0ICRwbGF5ZXIyc1R1cm4gPSAkKCcucGxheWVyLXR3b3MtdHVybicpO1xuICBjb25zdCAkcGxheWVyMnNUdXJuQnV0dG9uID0gJCgnLnBsYXllci10d29zLXR1cm4tYnV0dG9uJyk7XG4gIGNvbnN0ICRhbnN3ZXJMb2NhdGlvbiA9ICQoJy5hbnN3ZXItbG9jYXRpb24nKTtcbiAgY29uc3QgJGVuZE9mUm91bmQgPSAkKCcuZW5kLW9mLXJvdW5kJyk7XG4gIGNvbnN0ICRwMURpc3RhbmNlQXdheSA9ICQoJy5wMS1kaXN0YW5jZS1hd2F5Jyk7XG4gIGNvbnN0ICRwMkRpc3RhbmNlQXdheSA9ICQoJy5wMi1kaXN0YW5jZS1hd2F5Jyk7XG4gIGNvbnN0ICRwbGF5ZXIxU2NvcmUgPSAkKCcucGxheWVyLTEtc2NvcmUnKTtcbiAgY29uc3QgJHBsYXllcjJTY29yZSA9ICQoJy5wbGF5ZXItMi1zY29yZScpO1xuICBjb25zdCAkbmV4dFJvdW5kQnV0dG9uID0gJCgnLm5leHQtcm91bmQtYnV0dG9uJyk7XG4gIGNvbnN0ICRlbmRPZkdhbWUgPSAkKCcuZW5kLW9mLWdhbWUnKTtcbiAgY29uc3QgJHdpbm5lciA9ICQoJy53aW5uZXInKTtcblxuICBsZXQgcGxheWVyMUNsaWNrWCA9IDA7XG4gIGxldCBwbGF5ZXIxQ2xpY2tZID0gMDtcbiAgbGV0IHBsYXllcjJDbGlja1ggPSAwO1xuICBsZXQgcGxheWVyMkNsaWNrWSA9IDA7XG4gIGxldCBwbGF5ZXIxVHVybiA9IHRydWU7XG4gIGxldCByb3VuZE51bWJlciA9IDA7XG4gIGxldCBwbGF5ZXIxSHlwb3RlbnVzZSA9IDA7XG4gIGxldCBwbGF5ZXIySHlwb3RlbnVzZSA9IDA7XG4gIGxldCBwbGF5ZXIxRGlzdGFuY2VGcm9tVGFyZ2V0SW5NID0gMDtcbiAgbGV0IHBsYXllcjJEaXN0YW5jZUZyb21UYXJnZXRJbk0gPSAwO1xuICBsZXQgbWFwUGxheWFibGUgPSBmYWxzZTtcblxuICBsZXQgcGxheWVyT25lU2NvcmUgPSAwO1xuICBsZXQgcGxheWVyVHdvU2NvcmUgPSAwO1xuXG4gIGxldCB3aW5uZXIgPSAnJztcblxuXG5cblxuXG4gIC8vUXVlc3Rpb25zIGFuZCBSb3VuZHNcblxuXG4gIGNvbnN0IG8yQ2VudHJlT2JqID0ge25hbWU6ICdUaGUgTzIgQ2VudHJlJywgeExvY2F0aW9uOiA4MiwgeUxvY2F0aW9uOiA1OH07XG4gIGNvbnN0IGJ1Y2tpbmdoYW1QYWxhY2VPYmogPSB7bmFtZTogJ0J1Y2tpbmdoYW0gUGFsYWNlJywgeExvY2F0aW9uOiAyOCwgeUxvY2F0aW9uOiA2MX07XG4gIGNvbnN0IGtpbmdzQ3Jvc3NPYmogPSB7bmFtZTogJ0tpbmdzIENyb3NzIFN0YXRpb24nLCB4TG9jYXRpb246IDMzLCB5TG9jYXRpb246IDMyfTtcbiAgY29uc3QgZ2VuZXJhbEFzc2VtT2JqID0ge25hbWU6ICdHZW5lcmFsIEFzc2VtYmx5JywgeExvY2F0aW9uOiA1NCwgeUxvY2F0aW9uOiA0NX07XG4gIGNvbnN0IHF1ZXN0aW9uc0FycmF5ID0gW28yQ2VudHJlT2JqLCBidWNraW5naGFtUGFsYWNlT2JqLCBraW5nc0Nyb3NzT2JqLCBnZW5lcmFsQXNzZW1PYmpdO1xuXG4gIGxldCByb3VuZFF1ZXN0aW9uTmFtZSA9IChxdWVzdGlvbnNBcnJheVtyb3VuZE51bWJlcl0pLm5hbWU7XG5cblxuICAvL3dlbGNvbWUgcGFnZVxuXG4gIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICR3ZWxjb21lLnNob3coKTtcbiAgfSwgMTAwMCk7XG5cbiAgLy9jbGljayBzdGFydCBnYW1lIGJ1dHRvbiB0byBoaWRlIHRoZSB3ZWxjb21lIGRpdiBhbmQgc2hvdyB0aGUgZmlyc3QgcXVlc3Rpb25cblxuICAkc3RhcnRHYW1lQnV0dG9uLm9uKCdjbGljaycsICgpID0+IHtcbiAgICBjb25zb2xlLmxvZygkd2VsY29tZSk7XG4gICAgJHdlbGNvbWUuaGlkZSgpO1xuXG4gICAgLy8gcXVlc3Rpb24gZGl2IHBvcHMgdXBcblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgLy9nZXQgdGhlIG5hbWUgb2YgdGhlIGxhbmRtYXJrIGZyb20gdGhlIG5hbWUgdmFsdWUgaW4gdGhlIG9iamVjdCBpbiB0aGUgYXJyYXkuXG4gICAgICAkcm91bmRRdWVzdGlvbi50ZXh0KHJvdW5kUXVlc3Rpb25OYW1lKTtcbiAgICAgIGNvbnNvbGUubG9nKHJvdW5kUXVlc3Rpb25OYW1lKTtcbiAgICAgICRxdWVzdGlvbi5zaG93KCk7XG4gICAgfSwgNTAwKTtcbiAgfSk7XG5cblxuICAvL0hpZGUgcXVlc3Rpb24gZGl2XG4gICRzdGFydFJvdW5kQnV0dG9uLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAkcXVlc3Rpb24uaGlkZSgpO1xuICAgIG1hcFBsYXlhYmxlID0gdHJ1ZTtcbiAgfSk7XG5cblxuXG5cblxuXG4gIC8vUGxheWVyMUNsaWNrIEV2ZW50XG5cblxuXG5cbiAgJG1hcC5vbignY2xpY2snLCAoZSkgPT4ge1xuICAgIGlmIChtYXBQbGF5YWJsZSA9PT0gdHJ1ZSkge1xuXG4gICAgICBpZiAocGxheWVyMVR1cm4gPT09IHRydWUpIHtcblxuICAgICAgICAvL2ZpbmQgY2xpY2sgY29vcmRpbmF0ZXMgaW4gcGl4ZWxzXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGUucGFnZVgpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhlLnBhZ2VZKTtcbiAgICAgICAgcGxheWVyMUNsaWNrWCA9IGUucGFnZVggLSAkKGUudGFyZ2V0KS5wb3NpdGlvbigpLmxlZnQ7XG4gICAgICAgIHBsYXllcjFDbGlja1kgPSBlLnBhZ2VZIC0gJChlLnRhcmdldCkucG9zaXRpb24oKS50b3A7XG5cbiAgICAgICAgLy9jb252ZXJ0IHBhZ2VYIGFuZCBwYWdlWSBwaXhlbHMgdG8gcGVyY2VudGFnZSBvZiBwYWdlXG4gICAgICAgIGNvbnN0IHBsYXllcjFDbGlja1hQZXJjZW50T2ZXaW5kb3cgPSAocGxheWVyMUNsaWNrWCAvICRtYXAud2lkdGgoKSkqMTAwO1xuICAgICAgICBjb25zdCBwbGF5ZXIxQ2xpY2tZUGVyY2VudE9mV2luZG93ID0gKHBsYXllcjFDbGlja1kgLyAkbWFwLmhlaWdodCgpKSoxMDA7XG5cbiAgICAgICAgY29uc29sZS5sb2cocGxheWVyMUNsaWNrWFBlcmNlbnRPZldpbmRvdyk7XG4gICAgICAgIGNvbnNvbGUubG9nKHBsYXllcjFDbGlja1lQZXJjZW50T2ZXaW5kb3cpO1xuXG5cbiAgICAgICAgLy9EaXN0YW5jZSB0byB0YXJnZXRcblxuICAgICAgICBjb25zdCBwbGF5ZXIxZGlzdGFuY2VUb1RhcmdldFggPSAgcGxheWVyMUNsaWNrWFBlcmNlbnRPZldpbmRvdyAtIHF1ZXN0aW9uc0FycmF5W3JvdW5kTnVtYmVyXS54TG9jYXRpb247XG5cblxuICAgICAgICBjb25zdCBwbGF5ZXIxZGlzdGFuY2VUb1RhcmdldFkgPSBwbGF5ZXIxQ2xpY2tZUGVyY2VudE9mV2luZG93IC0gcXVlc3Rpb25zQXJyYXlbcm91bmROdW1iZXJdLnlMb2NhdGlvbjtcblxuXG4gICAgICAgIHBsYXllcjFIeXBvdGVudXNlID0gTWF0aC5mbG9vcihNYXRoLnNxcnQoTWF0aC5wb3cocGxheWVyMWRpc3RhbmNlVG9UYXJnZXRYLCAyKSArIE1hdGgucG93KHBsYXllcjFkaXN0YW5jZVRvVGFyZ2V0WSwgMikpKTtcblxuXG4vL2FkZCBwbGF5ZXIgb25lIGZsYWdcblxuICAgICAgICAkcGxheWVyMUZsYWcuY3NzKHtcbiAgICAgICAgICAnbGVmdCc6IHBsYXllcjFDbGlja1hQZXJjZW50T2ZXaW5kb3cgKyAnJScsXG4gICAgICAgICAgJ3RvcCc6IHBsYXllcjFDbGlja1lQZXJjZW50T2ZXaW5kb3cgKyAnJScsXG4gICAgICAgICAgJ2Rpc3BsYXknOiAnaW5saW5lJ1xuICAgICAgICB9KTtcblxuLy9yZXZlYWwgcGxheWVyIDJzIHR1cm4gZGl2XG5cbiAgICAgICAgJHBsYXllcjJzVHVybi5zaG93KCk7XG4gICAgICAgIG1hcFBsYXlhYmxlID0gZmFsc2U7XG4gICAgICAgIHBsYXllcjFUdXJuID0gZmFsc2U7XG5cbiAgICAgIH0gZWxzZSBpZiAocGxheWVyMVR1cm4gPT09IGZhbHNlKSB7XG5cbiAgICAgICAgLy9wbGF5ZXIgMiBjbGljayBjb29yZGluYXRlc1xuICAgICAgICBwbGF5ZXIyQ2xpY2tYID0gZS5wYWdlWCAtICQoZS50YXJnZXQpLnBvc2l0aW9uKCkubGVmdDtcbiAgICAgICAgcGxheWVyMkNsaWNrWSA9IGUucGFnZVkgLSAkKGUudGFyZ2V0KS5wb3NpdGlvbigpLnRvcDtcblxuICAgICAgICAvL2NvbnZlcnQgcGxheWVyIDIgY2xpY2sgdG8gcGVyY2VudGFnZVxuXG4gICAgICAgIGNvbnN0IHBsYXllcjJDbGlja1hQZXJjZW50T2ZXaW5kb3cgPSBNYXRoLnJvdW5kKChwbGF5ZXIyQ2xpY2tYIC8gJG1hcC53aWR0aCgpKSoxMDApO1xuICAgICAgICBjb25zdCBwbGF5ZXIyQ2xpY2tZUGVyY2VudE9mV2luZG93ID0gTWF0aC5yb3VuZCgocGxheWVyMkNsaWNrWSAvICRtYXAuaGVpZ2h0KCkpKjEwMCk7XG5cbiAgICAgICAgY29uc29sZS5sb2cocGxheWVyMkNsaWNrWFBlcmNlbnRPZldpbmRvdyk7XG4gICAgICAgIGNvbnNvbGUubG9nKHBsYXllcjJDbGlja1lQZXJjZW50T2ZXaW5kb3cpO1xuXG5cbiAgICAgICAgLy9wbGF5ZXIgMiBkaXN0YW5jZSB0byB0YXJnZXRcblxuICAgICAgICBjb25zdCBwbGF5ZXIyZGlzdGFuY2VUb1RhcmdldFggPSAgcGxheWVyMkNsaWNrWFBlcmNlbnRPZldpbmRvdyAtIHF1ZXN0aW9uc0FycmF5W3JvdW5kTnVtYmVyXS54TG9jYXRpb247XG5cbiAgICAgICAgY29uc3QgcGxheWVyMmRpc3RhbmNlVG9UYXJnZXRZID0gcGxheWVyMkNsaWNrWVBlcmNlbnRPZldpbmRvdyAtIHF1ZXN0aW9uc0FycmF5W3JvdW5kTnVtYmVyXS55TG9jYXRpb247XG5cbiAgICAgICAgcGxheWVyMkh5cG90ZW51c2UgPSBNYXRoLmZsb29yKE1hdGguc3FydChNYXRoLnBvdyhwbGF5ZXIyZGlzdGFuY2VUb1RhcmdldFgsIDIpICsgTWF0aC5wb3cocGxheWVyMmRpc3RhbmNlVG9UYXJnZXRZLCAyKSkpO1xuXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdkaXN0YW5jZSBmcm9tIHRhcmdldCAnICsgcGxheWVyMkh5cG90ZW51c2UpO1xuXG4gICAgICAgIC8vIGFkZCBwbGF5ZXIgMiBmbGFnXG4gICAgICAgICRwbGF5ZXIyRmxhZy5jc3Moe1xuICAgICAgICAgICdsZWZ0JzogcGxheWVyMkNsaWNrWFBlcmNlbnRPZldpbmRvdyArICclJyxcbiAgICAgICAgICAndG9wJzogcGxheWVyMkNsaWNrWVBlcmNlbnRPZldpbmRvdyArICclJyxcbiAgICAgICAgICAnZGlzcGxheSc6ICdpbmxpbmUnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFdpbiByb3VuZCBsb2dpY1xuICAgICAgICBpZiAocGxheWVyMUh5cG90ZW51c2UgPCBwbGF5ZXIySHlwb3RlbnVzZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdwbGF5ZXIgMSB3aW5zIHRoaXMgcm91bmQhJyk7XG4gICAgICAgICAgcGxheWVyT25lU2NvcmUgKys7XG4gICAgICAgIH0gZWxzZSBpZlxuICAgICAgICAocGxheWVyMUh5cG90ZW51c2UgPT09IHBsYXllcjJIeXBvdGVudXNlKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ2l0cyBhIHRpZSEnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygncGxheWVyIDIgd2lucyB0aGlzIHJvdW5kIScpO1xuICAgICAgICAgIHBsYXllclR3b1Njb3JlICsrO1xuICAgICAgICB9XG5cbiAgICAgICAgcGxheWVyMURpc3RhbmNlRnJvbVRhcmdldEluTSA9ICgxMDAwIC8gNikqIHBsYXllcjFIeXBvdGVudXNlO1xuICAgICAgICBwbGF5ZXIyRGlzdGFuY2VGcm9tVGFyZ2V0SW5NID0gKDEwMDAgLyA2KSogcGxheWVyMkh5cG90ZW51c2U7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ1BsYXllciAxIGNsaWNrZWQgJyArIHBsYXllcjFEaXN0YW5jZUZyb21UYXJnZXRJbk0gKyAnbSBhd2F5IGZyb20gdGhlIHRhcmdldCcpO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCdQbGF5ZXIgMiBjbGlja2VkICcgKyBwbGF5ZXIyRGlzdGFuY2VGcm9tVGFyZ2V0SW5NICsgJ20gYXdheSBmcm9tIHRoZSB0YXJnZXQnKTtcblxuXG5cblxuLy9yZXZlYWwgdGFyZ2V0IGxvY2F0aW9uXG5cbiAgICAgICAgc2V0VGltZW91dCggKCkgPT4ge1xuICAgICAgICAgICRhbnN3ZXJMb2NhdGlvbi5jc3Moe1xuICAgICAgICAgICAgJ2xlZnQnOiAocXVlc3Rpb25zQXJyYXlbcm91bmROdW1iZXJdLnhMb2NhdGlvbiktICQoZS50YXJnZXQpLnBvc2l0aW9uKCkubGVmdCArICclJyxcbiAgICAgICAgICAgICd0b3AnOiAocXVlc3Rpb25zQXJyYXlbcm91bmROdW1iZXJdLnlMb2NhdGlvbiktICQoZS50YXJnZXQpLnBvc2l0aW9uKCkudG9wICsgJyUnLFxuICAgICAgICAgICAgJ2Rpc3BsYXknOiAnaW5saW5lJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LCAxMDAwKTtcblxuLy9yZXZlYWwgZW5kIG9mIHJvdW5kIGRpdlxuICAgICAgICBzZXRUaW1lb3V0KCAoKSA9PiB7XG4gICAgICAgICAgbWFwUGxheWFibGUgPSBmYWxzZTtcbiAgICAgICAgICAkZW5kT2ZSb3VuZC5zaG93KCk7XG5cbiAgICAgICAgICBwbGF5ZXIxRGlzdGFuY2VGcm9tVGFyZ2V0SW5NID0gTWF0aC5yb3VuZChwbGF5ZXIxRGlzdGFuY2VGcm9tVGFyZ2V0SW5NKTtcbiAgICAgICAgICBwbGF5ZXIyRGlzdGFuY2VGcm9tVGFyZ2V0SW5NID0gTWF0aC5yb3VuZChwbGF5ZXIyRGlzdGFuY2VGcm9tVGFyZ2V0SW5NKTtcblxuICAgICAgICAgIGNvbnNvbGUubG9nKHBsYXllcjFEaXN0YW5jZUZyb21UYXJnZXRJbk0pO1xuICAgICAgICAgIGNvbnNvbGUubG9nKHBsYXllcjJEaXN0YW5jZUZyb21UYXJnZXRJbk0pO1xuXG4gICAgICAgICAgJHAxRGlzdGFuY2VBd2F5Lmh0bWwocGxheWVyMURpc3RhbmNlRnJvbVRhcmdldEluTSk7XG4gICAgICAgICAgJHAyRGlzdGFuY2VBd2F5Lmh0bWwocGxheWVyMkRpc3RhbmNlRnJvbVRhcmdldEluTSk7XG5cbiAgICAgICAgICAkcGxheWVyMVNjb3JlLnRleHQocGxheWVyT25lU2NvcmUpO1xuICAgICAgICAgICRwbGF5ZXIyU2NvcmUudGV4dChwbGF5ZXJUd29TY29yZSk7XG5cblxuICAgICAgICB9LCAyMDAwKTtcblxuXG5cbiAgICAgICAgLy8gY29uc29sZS5sb2cocm91bmRRdWVzdGlvbk5hbWUpO1xuXG5cblxuXG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuXG5cblxuXG5cbiAgJHBsYXllcjJzVHVybkJ1dHRvbi5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgbWFwUGxheWFibGUgPSB0cnVlO1xuICAgICRwbGF5ZXIyc1R1cm4uaGlkZSgpO1xuICB9KTtcblxuXG5cbi8vY2xpY2sgb24gTmV4dCBSb3VuZCBidXR0b25cbiAgJG5leHRSb3VuZEJ1dHRvbi5vbignY2xpY2snLCAoKSA9PiB7XG5cbiAgICAkZW5kT2ZSb3VuZC5oaWRlKCk7XG4gICAgJGFuc3dlckxvY2F0aW9uLmhpZGUoKTtcbiAgICAkcGxheWVyMUZsYWcuaGlkZSgpO1xuICAgICRwbGF5ZXIyRmxhZy5oaWRlKCk7XG5cblxuICAgIHJvdW5kTnVtYmVyKys7XG4gICAgY29uc29sZS5sb2cocm91bmROdW1iZXIpO1xuICAgIHJvdW5kUXVlc3Rpb25OYW1lID0gKHF1ZXN0aW9uc0FycmF5W3JvdW5kTnVtYmVyXSkubmFtZTtcbiAgICBwbGF5ZXIxVHVybiA9IHRydWU7XG4gICAgJHJvdW5kUXVlc3Rpb24udGV4dChyb3VuZFF1ZXN0aW9uTmFtZSk7XG5cbiAgICBpZiAocm91bmROdW1iZXIgPT09IDMpIHtcbiAgICAgICRlbmRPZkdhbWUuc2hvdygpO1xuICAgICAgJHBsYXllcjFTY29yZS50ZXh0KHBsYXllck9uZVNjb3JlKTtcbiAgICAgICRwbGF5ZXIyU2NvcmUudGV4dChwbGF5ZXJUd29TY29yZSk7XG5cbiAgICAgIGlmIChwbGF5ZXJPbmVTY29yZSA+IHBsYXllclR3b1Njb3JlKSB7XG4gICAgICAgIHdpbm5lciA9ICdQbGF5ZXIgT25lJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdpbm5lciA9ICdQbGF5ZXIgVHdvJztcbiAgICAgIH1cbiAgICAgICR3aW5uZXIudGV4dCh3aW5uZXIpO1xuXG4gICAgfSBlbHNlIHtcblxuICAgICAgc2V0VGltZW91dCggKCkgPT4ge1xuICAgICAgICAkcXVlc3Rpb24uY3NzKHtcbiAgICAgICAgICAnZGlzcGxheSc6ICdpbmxpbmUnXG4gICAgICAgIH0pO1xuICAgICAgfSwgNTAwKTtcbiAgICB9XG4gIH0pO1xuXG59KTtcblxuXG5cblxuXG5cbi8vSWYgcGxheWVyMSBjbGlja3Mgb24gdGhlIG8yIGNvbnNvbGUubG9nICdCdWxsc2V5ZSEnXG4vLyBpZiAocGxheWVyMUNsaWNrWFBlcmNlbnRPZldpbmRvdyA9PT0gcXVlc3Rpb25zQXJyYXlbcm91bmROdW1iZXJdLnhMb2NhdGlvbiAmJiBwbGF5ZXIxQ2xpY2tZUGVyY2VudE9mV2luZG93ID09PSBxdWVzdGlvbnNBcnJheVtyb3VuZE51bWJlcl0ueUxvY2F0aW9uKSB7XG4vLyAgIGNvbnNvbGUubG9nKCdidWxsc2V5ZSEnKTtcbi8vIH1cbi8vXG4vLyBpZiAocGxheWVyMUNsaWNrWFBlcmNlbnRPZldpbmRvdyA9PT0gYnVja2luZ2hhbVBhbGFjZU9iai54TG9jYXRpb24gJiYgYnVja2luZ2hhbVBhbGFjZU9iai55TG9jYXRpb24pIHtcbi8vICAgY29uc29sZS5sb2coJ0JlaGF2ZSBQaGlsbGlwJyk7XG4vLyB9XG4iXX0=
