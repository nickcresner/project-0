"use strict";$(function(){function t(){W=setInterval(function(){!0===Z&&(_--,h.html(_),0===_&&(clearInterval(W),h.hide(),d.show(),H=!1,!0===j?K+=5e3:N+=5e3))},1e3)}console.log("JS Loaded");var e=$(".map"),o=$(".welcome"),n=$(".map-select"),i=$(".chosen-map"),a=$(".quiz-select"),l=($(".quiz-select.london"),$(".quiz-select.new-york"),$(".quiz-select.madrid"),$(".quiz-select.hong-kong"),$(".chosen-quiz")),s=$(".start-game-button"),c=$(".question"),r=$(".round-question"),u=$(".start-round-button"),h=$(".countdown-timer"),d=$(".time-up"),p=$(".countdown-next-button"),g=$(".player-one-flag"),f=$(".player-two-flag"),w=$(".player-twos-turn"),m=$(".player-twos-turn-button"),y=$(".answer-location"),v=$(".end-of-round"),x=$(".p1-distance-away"),q=$(".p2-distance-away"),M=$(".player-1-score"),k=$(".player-2-score"),z=$(".next-round-button"),L=$(".end-of-game"),T=$(".p1-overall-distance-from-targets"),b=$(".p2-overall-distance-from-targets"),C=$(".winner"),I=$(".play-again-button"),P=null,X=null,Y=null,A=0,J=0,O=0,S=0,j=!0,B=0,D=0,E=0,F=0,G=0,H=!1,K=0,N=0,Q=0,R=0,U="",V=0;setTimeout(function(){o.show(),n.on("change",function(t){X=$(t.target).val();var o=$(".map-select option[value="+X+"]").html();i.text(o),e.removeAttr("class").addClass("map").addClass(X),a.removeClass("selected").filter("."+X).addClass("selected")}),a.on("change",function(t){P=$(t.target).val(),console.log("quiz select array in event listener",a),console.log(X);var e=$(".quiz-select."+X+" option[value="+P+"]").html();l.text(e),V=window.questions[X][P]})},1e3),s.on("click",function(){if(!X||!P)return!1;o.hide(),Y=V[B].name,setTimeout(function(){r.text(Y),console.log(Y),c.show()},250)});var W=null,Z=!1,_=30;p.on("click",function(){!0===j?(w.show(),d.hide(),j=!1):(v.show(),d.hide())}),u.on("click",function(){c.hide(),H=!0,Z=!0,_=30,h.show(),t(),Z=!0}),e.on("click",function(t){if(!0===H)if(Z=!1,clearInterval(W),!0===j){A=t.pageX-$(t.target).position().left,J=t.pageY-$(t.target).position().top;var o=A/e.width()*100,n=J/e.height()*100;console.log(o),console.log(n),console.log("questions array [0]",V[0]);var i=o-V[B].xLocation,a=n-V[B].yLocation;D=Math.floor(Math.sqrt(Math.pow(i,2)+Math.pow(a,2))),g.css({left:o+"%",top:n+"%",display:"inline"}),w.show(),H=!1,j=!1}else if(!1===j){O=t.pageX-$(t.target).position().left,S=t.pageY-$(t.target).position().top;var l=O/e.width()*100,s=S/e.height()*100;console.log(l),console.log(s);var c=l-V[B].xLocation,r=s-V[B].yLocation;E=Math.floor(Math.sqrt(Math.pow(c,2)+Math.pow(r,2))),f.css({left:l+"%",top:s+"%",display:"inline"}),D<E?K++:D===E?(K++,N++):N++,F=1e3/6*D,G=1e3/6*E,setTimeout(function(){y.css({left:V[B].xLocation-$(t.target).position().left+"%",top:V[B].yLocation-$(t.target).position().top+"%",display:"inline"})},1e3),setTimeout(function(){H=!1,v.show(),F=Math.round(F),G=Math.round(G),Q+=F,R+=G,x.html(F),q.html(G),M.text(K),k.text(N),T.text(Q),b.text(R)},2e3)}}),m.on("click",function(){H=!0,w.hide(),h.show(),_=30,Z=!0,t()}),z.on("click",function(){v.hide(),y.hide(),g.hide(),f.hide(),B++,B>=V.length?(console.log("end game sequence"),L.show(),M.text(K),k.text(N),T.text(Q),b.text(R),U=K>N?"Player One":K===N?"It's a Tie!":"Player Two",C.text(U),I.on("click",function(){L.hide(),o.show(),B=0,Q=0,R=0,K=0,N=0})):(console.log(B),Y=V[B].name,j=!0,r.text(Y),setTimeout(function(){c.css({display:"inline"})},250))})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwiJGNvdW50ZG93blRpbWVyIiwidGltZXJJZCIsInNldEludGVydmFsIiwicGxheWVyVHdvU2NvcmUiLCJ0aW1lUmVtYWluaW5nIiwiaHRtbCIsImNsZWFySW50ZXJ2YWwiLCJoaWRlIiwiJGNvdW50ZG93bk5leHRCdXR0b24iLCJwbGF5ZXIxVHVybiIsIiRwbGF5ZXIyc1R1cm4iLCIkdGltZVVwIiwiY29uc29sZSIsImxvZyIsIiRtYXAiLCIkbWFwU2VsZWN0IiwiJHdlbGNvbWUiLCIkbWFkcmlkUXVpelNlbGVjdCIsIiRob25nS29uZ1F1aXpTZWxlY3QiLCIkY2hvc2VuUXVpeiIsIiRzdGFydEdhbWVCdXR0b24iLCIkcXVlc3Rpb24iLCIkcm91bmRRdWVzdGlvbiIsIiRzdGFydFJvdW5kQnV0dG9uIiwiJHBsYXllcjFGbGFnIiwiJHBsYXllcjJGbGFnIiwiJHBsYXllcjJzVHVybkJ1dHRvbiIsIiRhbnN3ZXJMb2NhdGlvbiIsIiRlbmRPZlJvdW5kIiwiJHAxRGlzdGFuY2VBd2F5IiwiJHAyRGlzdGFuY2VBd2F5IiwiJHBsYXllcjFTY29yZSIsIiRwbGF5ZXIyU2NvcmUiLCIkbmV4dFJvdW5kQnV0dG9uIiwiJGVuZE9mR2FtZSIsIiRwMU92ZXJhbGxEaXN0YW5jZSIsIiRwMk92ZXJhbGxEaXN0YW5jZSIsIiRwbGF5QWdhaW5CdXR0b24iLCJjaXR5IiwicGxheWVyMUNsaWNrWCIsInBsYXllcjFDbGlja1kiLCJwbGF5ZXIyQ2xpY2tYIiwicm91bmROdW1iZXIiLCJwbGF5ZXIxSHlwb3RlbnVzZSIsInBsYXllcjJIeXBvdGVudXNlIiwicGxheWVyMURpc3RhbmNlRnJvbVRhcmdldEluTSIsIm1hcFBsYXlhYmxlIiwicGxheWVyT25lU2NvcmUiLCJwbGF5ZXJPbmVPdmVyYWxsRGlzdGFuY2UiLCJ3aW5uZXIiLCJxdWVzdGlvbnNBcnJheSIsInNob3ciLCJvbiIsImUiLCJyZW1vdmVBdHRyIiwidmFsIiwiY2hvc2VuQ2l0eSIsIiRjaG9zZW5NYXAiLCJ0ZXh0IiwiYWRkQ2xhc3MiLCIkcXVpelNlbGVjdCIsInJlbW92ZUNsYXNzIiwiZmlsdGVyIiwid2luZG93IiwicXVlc3Rpb25zIiwiY2hvc2VuRGlmZmljdWx0eSIsImRpZmZpY3VsdHkiLCJyb3VuZFF1ZXN0aW9uTmFtZSIsIm5hbWUiLCJzZXRUaW1lb3V0IiwidGltZXJJc1J1bm5pbmciLCJzdGFydENvdW50ZG93blRpbWVyIiwicGxheWVyMWRpc3RhbmNlVG9UYXJnZXRZIiwicGFnZVgiLCJ0YXJnZXQiLCJwb3NpdGlvbiIsImxlZnQiLCJwYWdlWSIsInRvcCIsIndpZHRoIiwiaGVpZ2h0IiwicGxheWVyMUNsaWNrWFBlcmNlbnRPZldpbmRvdyIsInBsYXllcjFDbGlja1lQZXJjZW50T2ZXaW5kb3ciLCJwbGF5ZXIxZGlzdGFuY2VUb1RhcmdldFgiLCJ4TG9jYXRpb24iLCJ5TG9jYXRpb24iLCJNYXRoIiwiZmxvb3IiLCJzcXJ0IiwicG93IiwicGxheWVyMmRpc3RhbmNlVG9UYXJnZXRZIiwiZGlzcGxheSIsInBsYXllcjJDbGlja1hQZXJjZW50T2ZXaW5kb3ciLCJwbGF5ZXIyQ2xpY2tZUGVyY2VudE9mV2luZG93IiwicGxheWVyMkNsaWNrWSIsInBsYXllcjJEaXN0YW5jZUZyb21UYXJnZXRJbk0iLCJwbGF5ZXIyZGlzdGFuY2VUb1RhcmdldFgiLCJwbGF5ZXJUd29PdmVyYWxsRGlzdGFuY2UiLCJjc3MiLCJyb3VuZCIsImxlbmd0aCIsIiR3aW5uZXIiXSwibWFwcGluZ3MiOiJZQUFBQSxHQUFFLFdBcUxNQyxRQUFBQSxLQVNHQyxFQUZEQyxZQUVPLFlBQ0xDLElBQUFBLElBQ0RDLElBQ0ZKLEVBQUFLLEtBQUFELEdBZkwsSUFBQUEsSUFrQkRFLGNBQUFMLEdBWE9ELEVBQWdCTyxPQWF4QkMsRUFBQUEsT0FDTUMsR0FBZ0IsR0FDbEIsSUFBQUMsRUFDQUMsR0FBQSxJQUVLUixHQUFBLE9BTFQsS0FyTUFTLFFBQVFDLElBQUksWUFBWkQsSUFBQUEsR0FBWWIsRUFB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ZVEsRUFBZWtELFFBQ2hDeEYsUUFBUUMsSUFBSSxxQkFDWnFCLEVBQVdpQixPQUNYcEIsRUFBYzJCLEtBQUtYLEdBQ25CZixFQUFjMEIsS0FBS3ZELEdBRW5CZ0MsRUFBbUJ1QixLQUFLVixHQUN4QlosRUFBbUJzQixLQUFLdUMsR0FHdEJoRCxFQURFRixFQUFpQjVDLEVBQ1YsYUFDQTRDLElBQW1CNUMsRUFDbkIsY0FFQSxhQUVYa0csRUFBUTNDLEtBQUtULEdBQ2JaLEVBQWlCZSxHQUFHLFFBQVMsV0FDM0JsQixFQUFXM0IsT0FDWFMsRUFBU21DLE9BQ1RULEVBQWMsRUFDZE0sRUFBMkIsRUFDM0JpRCxFQUEyQixFQUMzQmxELEVBQWlCLEVBQ2pCNUMsRUFBaUIsTUFLbkJTLFFBQVFDLElBQUk2QixHQUNaeUIsRUFBb0JqQixFQUFlUixHQUFhMEIsS0FDaEQzRCxHQUFjLEVBQ2RhLEVBQWVvQyxLQUFLUyxHQUVwQkUsV0FBWSxXQUNWaEQsRUFBVTZFLEtBQ1JQLFFBQVcsWUFFWiIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKCgpID0+IHtcbiAgY29uc29sZS5sb2coJ0pTIExvYWRlZCcpO1xuXG4gIGNvbnN0ICRtYXAgPSAkKCcubWFwJyk7XG5cbiAgY29uc3QgJHdlbGNvbWUgPSAkKCcud2VsY29tZScpO1xuICBjb25zdCAkbWFwU2VsZWN0ID0gJCgnLm1hcC1zZWxlY3QnKTtcbiAgY29uc3QgJGNob3Nlbk1hcCA9ICQoJy5jaG9zZW4tbWFwJyk7XG4gIGNvbnN0ICRxdWl6U2VsZWN0ID0gJCgnLnF1aXotc2VsZWN0Jyk7XG4gIGNvbnN0ICRsb25kb25RdWl6U2VsZWN0ID0gJCgnLnF1aXotc2VsZWN0LmxvbmRvbicpO1xuICBjb25zdCAkbmV3WW9ya1F1aXpTZWxlY3QgPSAkKCcucXVpei1zZWxlY3QubmV3LXlvcmsnKTtcbiAgY29uc3QgJG1hZHJpZFF1aXpTZWxlY3QgPSAkKCcucXVpei1zZWxlY3QubWFkcmlkJyk7XG4gIGNvbnN0ICRob25nS29uZ1F1aXpTZWxlY3QgPSAkKCcucXVpei1zZWxlY3QuaG9uZy1rb25nJyk7XG4gIGNvbnN0ICRjaG9zZW5RdWl6ID0gJCgnLmNob3Nlbi1xdWl6Jyk7XG4gIGNvbnN0ICRzdGFydEdhbWVCdXR0b24gPSAkKCcuc3RhcnQtZ2FtZS1idXR0b24nKTtcbiAgY29uc3QgJHF1ZXN0aW9uID0gJCgnLnF1ZXN0aW9uJyk7XG4gIGNvbnN0ICRyb3VuZFF1ZXN0aW9uID0gJCgnLnJvdW5kLXF1ZXN0aW9uJyk7XG4gIGNvbnN0ICRzdGFydFJvdW5kQnV0dG9uID0gJCgnLnN0YXJ0LXJvdW5kLWJ1dHRvbicpO1xuICBjb25zdCAkY291bnRkb3duVGltZXIgPSAkKCcuY291bnRkb3duLXRpbWVyJyk7XG4gIGNvbnN0ICR0aW1lVXAgPSAkKCcudGltZS11cCcpO1xuICBjb25zdCAkY291bnRkb3duTmV4dEJ1dHRvbiA9ICQoJy5jb3VudGRvd24tbmV4dC1idXR0b24nKTtcbiAgY29uc3QgJHBsYXllcjFGbGFnID0gJCgnLnBsYXllci1vbmUtZmxhZycpO1xuICBjb25zdCAkcGxheWVyMkZsYWcgPSAkKCcucGxheWVyLXR3by1mbGFnJyk7XG4gIGNvbnN0ICRwbGF5ZXIyc1R1cm4gPSAkKCcucGxheWVyLXR3b3MtdHVybicpO1xuICBjb25zdCAkcGxheWVyMnNUdXJuQnV0dG9uID0gJCgnLnBsYXllci10d29zLXR1cm4tYnV0dG9uJyk7XG4gIGNvbnN0ICRhbnN3ZXJMb2NhdGlvbiA9ICQoJy5hbnN3ZXItbG9jYXRpb24nKTtcbiAgY29uc3QgJGVuZE9mUm91bmQgPSAkKCcuZW5kLW9mLXJvdW5kJyk7XG4gIGNvbnN0ICRwMURpc3RhbmNlQXdheSA9ICQoJy5wMS1kaXN0YW5jZS1hd2F5Jyk7XG4gIGNvbnN0ICRwMkRpc3RhbmNlQXdheSA9ICQoJy5wMi1kaXN0YW5jZS1hd2F5Jyk7XG4gIGNvbnN0ICRwbGF5ZXIxU2NvcmUgPSAkKCcucGxheWVyLTEtc2NvcmUnKTtcbiAgY29uc3QgJHBsYXllcjJTY29yZSA9ICQoJy5wbGF5ZXItMi1zY29yZScpO1xuICBjb25zdCAkbmV4dFJvdW5kQnV0dG9uID0gJCgnLm5leHQtcm91bmQtYnV0dG9uJyk7XG4gIGNvbnN0ICRlbmRPZkdhbWUgPSAkKCcuZW5kLW9mLWdhbWUnKTtcbiAgY29uc3QgJHAxT3ZlcmFsbERpc3RhbmNlID0gJCgnLnAxLW92ZXJhbGwtZGlzdGFuY2UtZnJvbS10YXJnZXRzJyk7XG4gIGNvbnN0ICRwMk92ZXJhbGxEaXN0YW5jZSA9ICQoJy5wMi1vdmVyYWxsLWRpc3RhbmNlLWZyb20tdGFyZ2V0cycpO1xuICBjb25zdCAkd2lubmVyID0gJCgnLndpbm5lcicpO1xuICBjb25zdCAkcGxheUFnYWluQnV0dG9uID0gJCgnLnBsYXktYWdhaW4tYnV0dG9uJyk7XG5cbiAgbGV0IGRpZmZpY3VsdHkgPSBudWxsO1xuICBsZXQgY2l0eSA9IG51bGw7XG4gIGxldCBxdWVzdGlvbnNPYmplY3QgPSBudWxsO1xuICBsZXQgcm91bmRRdWVzdGlvbk5hbWUgPSBudWxsO1xuXG5cbiAgbGV0IHBsYXllcjFDbGlja1ggPSAwO1xuICBsZXQgcGxheWVyMUNsaWNrWSA9IDA7XG4gIGxldCBwbGF5ZXIyQ2xpY2tYID0gMDtcbiAgbGV0IHBsYXllcjJDbGlja1kgPSAwO1xuXG4gIGxldCBwbGF5ZXIxVHVybiA9IHRydWU7XG4gIGxldCByb3VuZE51bWJlciA9IDA7XG4gIGxldCBwbGF5ZXIxSHlwb3RlbnVzZSA9IDA7XG4gIGxldCBwbGF5ZXIySHlwb3RlbnVzZSA9IDA7XG4gIGxldCBwbGF5ZXIxRGlzdGFuY2VGcm9tVGFyZ2V0SW5NID0gMDtcbiAgbGV0IHBsYXllcjJEaXN0YW5jZUZyb21UYXJnZXRJbk0gPSAwO1xuXG4gIGxldCBtYXBQbGF5YWJsZSA9IGZhbHNlO1xuXG4gIGxldCBwbGF5ZXJPbmVTY29yZSA9IDA7XG4gIGxldCBwbGF5ZXJUd29TY29yZSA9IDA7XG5cbiAgbGV0IHBsYXllck9uZU92ZXJhbGxEaXN0YW5jZSA9IDA7XG4gIGxldCBwbGF5ZXJUd29PdmVyYWxsRGlzdGFuY2UgPSAwO1xuXG4gIGxldCB3aW5uZXIgPSAnJztcblxuXG5cblxuXG5cblxuICAvLyB3aGljaCBzZXQgb2YgcXVlc3Rpb25zIHRvIHVzZT9cblxuICBsZXQgcXVlc3Rpb25zQXJyYXkgPSAwO1xuXG4gIC8vR2V0IHRoZSBuYW1lIG9mIHRoZSBsYW5kbWFyayBmb3IgZWFjaCBxdWVzdGlvblxuXG5cbiAgLy93ZWxjb21lIHBhZ2VcblxuXG4gIHNldFRpbWVvdXQoKCkgPT4ge1xuXG4gICAgJHdlbGNvbWUuc2hvdygpO1xuXG4gICAgJG1hcFNlbGVjdC5vbignY2hhbmdlJywgKGUpID0+IHtcbiAgICAgIGNpdHkgPSAkKGUudGFyZ2V0KS52YWwoKTtcbiAgICAgIGNvbnN0IGNob3NlbkNpdHkgPSAkKGAubWFwLXNlbGVjdCBvcHRpb25bdmFsdWU9JHtjaXR5fV1gKS5odG1sKCk7XG5cbiAgICAgICRjaG9zZW5NYXAudGV4dChjaG9zZW5DaXR5KTtcblxuICAgICAgJG1hcC5yZW1vdmVBdHRyKCdjbGFzcycpLmFkZENsYXNzKCdtYXAnKS5hZGRDbGFzcyhjaXR5KTtcblxuICAgICAgJHF1aXpTZWxlY3RcbiAgICAgICAgLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpXG4gICAgICAgIC5maWx0ZXIoYC4ke2NpdHl9YClcbiAgICAgICAgLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xuXG4gICAgICAvLyBpZiAoY2l0eSA9PT0gJ2xvbmRvbicpIHtcbiAgICAgIC8vICAgJGxvbmRvblF1aXpTZWxlY3Quc2hvdygpO1xuICAgICAgLy8gICAkbmV3WW9ya1F1aXpTZWxlY3QuaGlkZSgpO1xuICAgICAgLy8gICAkbWFkcmlkUXVpelNlbGVjdC5oaWRlKCk7XG4gICAgICAvLyAgICRob25nS29uZ1F1aXpTZWxlY3QuaGlkZSgpO1xuICAgICAgLy8gICBxdWVzdGlvbnNPYmplY3QgPSBsb25kb25RdWVzdGlvbnNPYmo7XG4gICAgICAvLyB9IGVsc2UgaWYgKGNpdHkgPT09ICduZXcteW9yaycpIHtcbiAgICAgIC8vICAgJGxvbmRvblF1aXpTZWxlY3QuaGlkZSgpO1xuICAgICAgLy8gICAkbmV3WW9ya1F1aXpTZWxlY3Quc2hvdygpO1xuICAgICAgLy8gICAkbWFkcmlkUXVpelNlbGVjdC5oaWRlKCk7XG4gICAgICAvLyAgICRob25nS29uZ1F1aXpTZWxlY3QuaGlkZSgpO1xuICAgICAgLy8gICBxdWVzdGlvbnNPYmplY3QgPSBuZXdZb3JrUXVlc3Rpb25zT2JqO1xuICAgICAgLy8gfSBlbHNlIGlmIChjaXR5ID09PSAnbWFkcmlkJykge1xuICAgICAgLy8gICAkbG9uZG9uUXVpelNlbGVjdC5oaWRlKCk7XG4gICAgICAvLyAgICRuZXdZb3JrUXVpelNlbGVjdC5oaWRlKCk7XG4gICAgICAvLyAgICRtYWRyaWRRdWl6U2VsZWN0LnNob3coKTtcbiAgICAgIC8vICAgJGhvbmdLb25nUXVpelNlbGVjdC5oaWRlKCk7XG4gICAgICAvLyAgIHF1ZXN0aW9uc09iamVjdCA9IG1hZHJpZFF1ZXN0aW9uc09iajtcbiAgICAgIC8vIH0gZWxzZSBpZiAoY2l0eSA9PT0gJ2hvbmcta29uZycpIHtcbiAgICAgIC8vICAgJGxvbmRvblF1aXpTZWxlY3QuaGlkZSgpO1xuICAgICAgLy8gICAkbmV3WW9ya1F1aXpTZWxlY3QuaGlkZSgpO1xuICAgICAgLy8gICAkbWFkcmlkUXVpelNlbGVjdC5oaWRlKCk7XG4gICAgICAvLyAgICRob25nS29uZ1F1aXpTZWxlY3Quc2hvdygpO1xuICAgICAgLy8gICBxdWVzdGlvbnNPYmplY3QgPSBob25nS29uZ1F1ZXN0aW9uc09iajtcbiAgICAgIC8vIH1cbiAgICB9KTtcblxuICAgICRxdWl6U2VsZWN0Lm9uKCdjaGFuZ2UnLCAoZSkgPT4ge1xuICAgICAgZGlmZmljdWx0eSA9ICQoZS50YXJnZXQpLnZhbCgpO1xuICAgICAgY29uc29sZS5sb2coJ3F1aXogc2VsZWN0IGFycmF5IGluIGV2ZW50IGxpc3RlbmVyJywgJHF1aXpTZWxlY3QpO1xuICAgICAgY29uc29sZS5sb2coY2l0eSk7XG5cbiAgICAgIGNvbnN0IGNob3NlbkRpZmZpY3VsdHkgPSAkKGAucXVpei1zZWxlY3QuJHtjaXR5fSBvcHRpb25bdmFsdWU9JHtkaWZmaWN1bHR5fV1gKS5odG1sKCk7XG5cbiAgICAgICRjaG9zZW5RdWl6LnRleHQoY2hvc2VuRGlmZmljdWx0eSk7XG5cbiAgICAgIHF1ZXN0aW9uc0FycmF5ID0gd2luZG93LnF1ZXN0aW9uc1tjaXR5XVtkaWZmaWN1bHR5XTtcblxuXG4gICAgfSk7XG4gIH0sIDEwMDApO1xuXG4gIC8vY2xpY2sgc3RhcnQgZ2FtZSBidXR0b24gdG8gaGlkZSB0aGUgd2VsY29tZSBkaXYgYW5kIHNob3cgdGhlIGZpcnN0IHF1ZXN0aW9uXG5cbiAgJHN0YXJ0R2FtZUJ1dHRvbi5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgaWYoIWNpdHkgfHwgIWRpZmZpY3VsdHkpXG4gICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAkd2VsY29tZS5oaWRlKCk7XG5cbiAgICByb3VuZFF1ZXN0aW9uTmFtZSA9IHF1ZXN0aW9uc0FycmF5W3JvdW5kTnVtYmVyXS5uYW1lO1xuXG5cbiAgICAvLyBxdWVzdGlvbiBkaXYgcG9wcyB1cFxuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAvL2dldCB0aGUgbmFtZSBvZiB0aGUgbGFuZG1hcmsgZnJvbSB0aGUgbmFtZSB2YWx1ZSBpbiB0aGUgb2JqZWN0IGluIHRoZSBhcnJheS5cbiAgICAgICRyb3VuZFF1ZXN0aW9uLnRleHQocm91bmRRdWVzdGlvbk5hbWUpO1xuICAgICAgY29uc29sZS5sb2cocm91bmRRdWVzdGlvbk5hbWUpO1xuICAgICAgJHF1ZXN0aW9uLnNob3coKTtcbiAgICB9LCAyNTApO1xuICB9KTtcblxuICAvL2NvdW50ZG93biB0aW1lclxuXG5cbiAgbGV0IHRpbWVySWQgPSBudWxsO1xuICBsZXQgdGltZXJJc1J1bm5pbmcgPSBmYWxzZTtcbiAgbGV0IHRpbWVSZW1haW5pbmcgPSAzMDtcblxuICBmdW5jdGlvbiBzdGFydENvdW50ZG93blRpbWVyKCkge1xuICAgIC8vIGlmICh0aW1lcklzUnVubmluZykge1xuICAgIC8vXG4gICAgLy8gICBjbGVhckludGVydmFsKHRpbWVySWQpO1xuICAgIC8vICAgdGltZXJJc1J1bm5pbmcgPSBmYWxzZTtcbiAgICAvL1xuICAgIC8vIH0gZWxzZSB7XG5cblxuICAgIHRpbWVySWQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBpZiAodGltZXJJc1J1bm5pbmcgPT09IHRydWUpIHtcbiAgICAgICAgdGltZVJlbWFpbmluZyAtLTtcbiAgICAgICAgJGNvdW50ZG93blRpbWVyLmh0bWwodGltZVJlbWFpbmluZyk7XG5cbiAgICAgICAgaWYgKHRpbWVSZW1haW5pbmcgPT09IDApIHtcbiAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVySWQpO1xuICAgICAgICAgICRjb3VudGRvd25UaW1lci5oaWRlKCk7XG4gICAgICAgICAgJHRpbWVVcC5zaG93KCk7XG4gICAgICAgICAgbWFwUGxheWFibGUgPSBmYWxzZTtcbiAgICAgICAgICBpZiAocGxheWVyMVR1cm4gPT09IHRydWUpIHtcbiAgICAgICAgICAgIHBsYXllck9uZVNjb3JlICs9IDUwMDA7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBsYXllclR3b1Njb3JlICs9IDUwMDA7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgMTAwMCk7XG4gIH1cblxuICAkY291bnRkb3duTmV4dEJ1dHRvbi5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgaWYgKHBsYXllcjFUdXJuID09PSB0cnVlKSB7XG4gICAgICAkcGxheWVyMnNUdXJuLnNob3coKTtcbiAgICAgICR0aW1lVXAuaGlkZSgpO1xuICAgICAgcGxheWVyMVR1cm4gPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGVuZE9mUm91bmQuc2hvdygpO1xuICAgICAgJHRpbWVVcC5oaWRlKCk7XG4gICAgfVxuICB9KTtcblxuXG5cblxuXG4gIC8vSGlkZSBxdWVzdGlvbiBkaXZcbiAgJHN0YXJ0Um91bmRCdXR0b24ub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICRxdWVzdGlvbi5oaWRlKCk7XG4gICAgbWFwUGxheWFibGUgPSB0cnVlO1xuICAgIHRpbWVySXNSdW5uaW5nID0gdHJ1ZTtcbiAgICB0aW1lUmVtYWluaW5nID0gMzA7XG4gICAgJGNvdW50ZG93blRpbWVyLnNob3coKTtcbiAgICBzdGFydENvdW50ZG93blRpbWVyKCk7XG4gICAgdGltZXJJc1J1bm5pbmcgPSB0cnVlO1xuXG4gIH0pO1xuXG5cblxuXG5cblxuICAvL1BsYXllcjFDbGljayBFdmVudFxuXG5cblxuXG4gICRtYXAub24oJ2NsaWNrJywgKGUpID0+IHtcbiAgICBpZiAobWFwUGxheWFibGUgPT09IHRydWUpIHtcblxuICAgICAgdGltZXJJc1J1bm5pbmcgPSBmYWxzZTtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XG5cbiAgICAgIGlmIChwbGF5ZXIxVHVybiA9PT0gdHJ1ZSkge1xuXG5cbiAgICAgICAgLy9maW5kIGNsaWNrIGNvb3JkaW5hdGVzIGluIHBpeGVsc1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhlLnBhZ2VYKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coZS5wYWdlWSk7XG4gICAgICAgIHBsYXllcjFDbGlja1ggPSBlLnBhZ2VYIC0gJChlLnRhcmdldCkucG9zaXRpb24oKS5sZWZ0O1xuICAgICAgICBwbGF5ZXIxQ2xpY2tZID0gZS5wYWdlWSAtICQoZS50YXJnZXQpLnBvc2l0aW9uKCkudG9wO1xuXG4gICAgICAgIC8vY29udmVydCBwYWdlWCBhbmQgcGFnZVkgcGl4ZWxzIHRvIHBlcmNlbnRhZ2Ugb2YgcGFnZVxuICAgICAgICBjb25zdCBwbGF5ZXIxQ2xpY2tYUGVyY2VudE9mV2luZG93ID0gKHBsYXllcjFDbGlja1ggLyAkbWFwLndpZHRoKCkpKjEwMDtcbiAgICAgICAgY29uc3QgcGxheWVyMUNsaWNrWVBlcmNlbnRPZldpbmRvdyA9IChwbGF5ZXIxQ2xpY2tZIC8gJG1hcC5oZWlnaHQoKSkqMTAwO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKHBsYXllcjFDbGlja1hQZXJjZW50T2ZXaW5kb3cpO1xuICAgICAgICBjb25zb2xlLmxvZyhwbGF5ZXIxQ2xpY2tZUGVyY2VudE9mV2luZG93KTtcblxuXG4gICAgICAgIC8vRGlzdGFuY2UgdG8gdGFyZ2V0XG4gICAgICAgIGNvbnNvbGUubG9nKCdxdWVzdGlvbnMgYXJyYXkgWzBdJywgcXVlc3Rpb25zQXJyYXlbMF0pO1xuICAgICAgICBjb25zdCBwbGF5ZXIxZGlzdGFuY2VUb1RhcmdldFggPSAgcGxheWVyMUNsaWNrWFBlcmNlbnRPZldpbmRvdyAtIHF1ZXN0aW9uc0FycmF5W3JvdW5kTnVtYmVyXS54TG9jYXRpb247XG5cblxuICAgICAgICBjb25zdCBwbGF5ZXIxZGlzdGFuY2VUb1RhcmdldFkgPSBwbGF5ZXIxQ2xpY2tZUGVyY2VudE9mV2luZG93IC0gcXVlc3Rpb25zQXJyYXlbcm91bmROdW1iZXJdLnlMb2NhdGlvbjtcblxuXG4gICAgICAgIHBsYXllcjFIeXBvdGVudXNlID0gTWF0aC5mbG9vcihNYXRoLnNxcnQoTWF0aC5wb3cocGxheWVyMWRpc3RhbmNlVG9UYXJnZXRYLCAyKSArIE1hdGgucG93KHBsYXllcjFkaXN0YW5jZVRvVGFyZ2V0WSwgMikpKTtcblxuXG4gICAgICAgIC8vYWRkIHBsYXllciBvbmUgZmxhZ1xuXG4gICAgICAgICRwbGF5ZXIxRmxhZy5jc3Moe1xuICAgICAgICAgICdsZWZ0JzogcGxheWVyMUNsaWNrWFBlcmNlbnRPZldpbmRvdyArICclJyxcbiAgICAgICAgICAndG9wJzogcGxheWVyMUNsaWNrWVBlcmNlbnRPZldpbmRvdyArICclJyxcbiAgICAgICAgICAnZGlzcGxheSc6ICdpbmxpbmUnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vcmV2ZWFsIHBsYXllciAycyB0dXJuIGRpdlxuXG4gICAgICAgICRwbGF5ZXIyc1R1cm4uc2hvdygpO1xuICAgICAgICBtYXBQbGF5YWJsZSA9IGZhbHNlO1xuICAgICAgICBwbGF5ZXIxVHVybiA9IGZhbHNlO1xuXG4gICAgICB9IGVsc2UgaWYgKHBsYXllcjFUdXJuID09PSBmYWxzZSkge1xuXG5cbiAgICAgICAgLy9wbGF5ZXIgMiBjbGljayBjb29yZGluYXRlc1xuICAgICAgICBwbGF5ZXIyQ2xpY2tYID0gZS5wYWdlWCAtICQoZS50YXJnZXQpLnBvc2l0aW9uKCkubGVmdDtcbiAgICAgICAgcGxheWVyMkNsaWNrWSA9IGUucGFnZVkgLSAkKGUudGFyZ2V0KS5wb3NpdGlvbigpLnRvcDtcblxuICAgICAgICAvL2NvbnZlcnQgcGxheWVyIDIgY2xpY2sgdG8gcGVyY2VudGFnZVxuXG4gICAgICAgIGNvbnN0IHBsYXllcjJDbGlja1hQZXJjZW50T2ZXaW5kb3cgPSAocGxheWVyMkNsaWNrWCAvICRtYXAud2lkdGgoKSkqMTAwO1xuICAgICAgICBjb25zdCBwbGF5ZXIyQ2xpY2tZUGVyY2VudE9mV2luZG93ID0gKHBsYXllcjJDbGlja1kgLyAkbWFwLmhlaWdodCgpKSoxMDA7XG5cbiAgICAgICAgY29uc29sZS5sb2cocGxheWVyMkNsaWNrWFBlcmNlbnRPZldpbmRvdyk7XG4gICAgICAgIGNvbnNvbGUubG9nKHBsYXllcjJDbGlja1lQZXJjZW50T2ZXaW5kb3cpO1xuXG5cbiAgICAgICAgLy9wbGF5ZXIgMiBkaXN0YW5jZSB0byB0YXJnZXRcblxuICAgICAgICBjb25zdCBwbGF5ZXIyZGlzdGFuY2VUb1RhcmdldFggPSAgcGxheWVyMkNsaWNrWFBlcmNlbnRPZldpbmRvdyAtIHF1ZXN0aW9uc0FycmF5W3JvdW5kTnVtYmVyXS54TG9jYXRpb247XG5cbiAgICAgICAgY29uc3QgcGxheWVyMmRpc3RhbmNlVG9UYXJnZXRZID0gcGxheWVyMkNsaWNrWVBlcmNlbnRPZldpbmRvdyAtIHF1ZXN0aW9uc0FycmF5W3JvdW5kTnVtYmVyXS55TG9jYXRpb247XG5cbiAgICAgICAgcGxheWVyMkh5cG90ZW51c2UgPSBNYXRoLmZsb29yKE1hdGguc3FydChNYXRoLnBvdyhwbGF5ZXIyZGlzdGFuY2VUb1RhcmdldFgsIDIpICsgTWF0aC5wb3cocGxheWVyMmRpc3RhbmNlVG9UYXJnZXRZLCAyKSkpO1xuXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdkaXN0YW5jZSBmcm9tIHRhcmdldCAnICsgcGxheWVyMkh5cG90ZW51c2UpO1xuXG4gICAgICAgIC8vIGFkZCBwbGF5ZXIgMiBmbGFnXG4gICAgICAgICRwbGF5ZXIyRmxhZy5jc3Moe1xuICAgICAgICAgICdsZWZ0JzogcGxheWVyMkNsaWNrWFBlcmNlbnRPZldpbmRvdyArICclJyxcbiAgICAgICAgICAndG9wJzogcGxheWVyMkNsaWNrWVBlcmNlbnRPZldpbmRvdyArICclJyxcbiAgICAgICAgICAnZGlzcGxheSc6ICdpbmxpbmUnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFdpbiByb3VuZCBsb2dpY1xuICAgICAgICBpZiAocGxheWVyMUh5cG90ZW51c2UgPCBwbGF5ZXIySHlwb3RlbnVzZSkge1xuXG4gICAgICAgICAgcGxheWVyT25lU2NvcmUgKys7XG4gICAgICAgIH0gZWxzZSBpZlxuICAgICAgICAocGxheWVyMUh5cG90ZW51c2UgPT09IHBsYXllcjJIeXBvdGVudXNlKSB7XG4gICAgICAgICAgcGxheWVyT25lU2NvcmUgKys7XG4gICAgICAgICAgcGxheWVyVHdvU2NvcmUgKys7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGxheWVyVHdvU2NvcmUgKys7XG4gICAgICAgIH1cblxuICAgICAgICBwbGF5ZXIxRGlzdGFuY2VGcm9tVGFyZ2V0SW5NID0gKDEwMDAgLyA2KSogcGxheWVyMUh5cG90ZW51c2U7XG4gICAgICAgIHBsYXllcjJEaXN0YW5jZUZyb21UYXJnZXRJbk0gPSAoMTAwMCAvIDYpKiBwbGF5ZXIySHlwb3RlbnVzZTtcblxuXG5cbiAgICAgICAgLy9yZXZlYWwgdGFyZ2V0IGxvY2F0aW9uXG5cbiAgICAgICAgc2V0VGltZW91dCggKCkgPT4ge1xuICAgICAgICAgICRhbnN3ZXJMb2NhdGlvbi5jc3Moe1xuICAgICAgICAgICAgJ2xlZnQnOiAocXVlc3Rpb25zQXJyYXlbcm91bmROdW1iZXJdLnhMb2NhdGlvbiktICQoZS50YXJnZXQpLnBvc2l0aW9uKCkubGVmdCArICclJyxcbiAgICAgICAgICAgICd0b3AnOiAocXVlc3Rpb25zQXJyYXlbcm91bmROdW1iZXJdLnlMb2NhdGlvbiktICQoZS50YXJnZXQpLnBvc2l0aW9uKCkudG9wICsgJyUnLFxuICAgICAgICAgICAgJ2Rpc3BsYXknOiAnaW5saW5lJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LCAxMDAwKTtcblxuICAgICAgICAvL3JldmVhbCBlbmQgb2Ygcm91bmQgZGl2XG4gICAgICAgIHNldFRpbWVvdXQoICgpID0+IHtcbiAgICAgICAgICBtYXBQbGF5YWJsZSA9IGZhbHNlO1xuICAgICAgICAgICRlbmRPZlJvdW5kLnNob3coKTtcblxuICAgICAgICAgIHBsYXllcjFEaXN0YW5jZUZyb21UYXJnZXRJbk0gPSBNYXRoLnJvdW5kKHBsYXllcjFEaXN0YW5jZUZyb21UYXJnZXRJbk0pO1xuICAgICAgICAgIHBsYXllcjJEaXN0YW5jZUZyb21UYXJnZXRJbk0gPSBNYXRoLnJvdW5kKHBsYXllcjJEaXN0YW5jZUZyb21UYXJnZXRJbk0pO1xuXG4gICAgICAgICAgcGxheWVyT25lT3ZlcmFsbERpc3RhbmNlICs9IHBsYXllcjFEaXN0YW5jZUZyb21UYXJnZXRJbk07XG4gICAgICAgICAgcGxheWVyVHdvT3ZlcmFsbERpc3RhbmNlICs9IHBsYXllcjJEaXN0YW5jZUZyb21UYXJnZXRJbk07XG5cbiAgICAgICAgICAkcDFEaXN0YW5jZUF3YXkuaHRtbChwbGF5ZXIxRGlzdGFuY2VGcm9tVGFyZ2V0SW5NKTtcbiAgICAgICAgICAkcDJEaXN0YW5jZUF3YXkuaHRtbChwbGF5ZXIyRGlzdGFuY2VGcm9tVGFyZ2V0SW5NKTtcblxuICAgICAgICAgICRwbGF5ZXIxU2NvcmUudGV4dChwbGF5ZXJPbmVTY29yZSk7XG4gICAgICAgICAgJHBsYXllcjJTY29yZS50ZXh0KHBsYXllclR3b1Njb3JlKTtcblxuICAgICAgICAgICRwMU92ZXJhbGxEaXN0YW5jZS50ZXh0KHBsYXllck9uZU92ZXJhbGxEaXN0YW5jZSk7XG4gICAgICAgICAgJHAyT3ZlcmFsbERpc3RhbmNlLnRleHQocGxheWVyVHdvT3ZlcmFsbERpc3RhbmNlKTtcblxuXG4gICAgICAgIH0sIDIwMDApO1xuXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHJvdW5kUXVlc3Rpb25OYW1lKTtcblxuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgJHBsYXllcjJzVHVybkJ1dHRvbi5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgbWFwUGxheWFibGUgPSB0cnVlO1xuICAgICRwbGF5ZXIyc1R1cm4uaGlkZSgpO1xuICAgICRjb3VudGRvd25UaW1lci5zaG93KCk7XG4gICAgdGltZVJlbWFpbmluZyA9IDMwO1xuICAgIHRpbWVySXNSdW5uaW5nID0gdHJ1ZTtcbiAgICBzdGFydENvdW50ZG93blRpbWVyKCk7XG4gIH0pO1xuXG5cblxuICAvL2NsaWNrIG9uIE5leHQgUm91bmQgYnV0dG9uXG4gICRuZXh0Um91bmRCdXR0b24ub24oJ2NsaWNrJywgKCkgPT4ge1xuXG4gICAgJGVuZE9mUm91bmQuaGlkZSgpO1xuICAgICRhbnN3ZXJMb2NhdGlvbi5oaWRlKCk7XG4gICAgJHBsYXllcjFGbGFnLmhpZGUoKTtcbiAgICAkcGxheWVyMkZsYWcuaGlkZSgpO1xuXG4gICAgcm91bmROdW1iZXIrKztcblxuXG4gICAgaWYgKHJvdW5kTnVtYmVyID49IHF1ZXN0aW9uc0FycmF5Lmxlbmd0aCkge1xuICAgICAgY29uc29sZS5sb2coJ2VuZCBnYW1lIHNlcXVlbmNlJyk7XG4gICAgICAkZW5kT2ZHYW1lLnNob3coKTtcbiAgICAgICRwbGF5ZXIxU2NvcmUudGV4dChwbGF5ZXJPbmVTY29yZSk7XG4gICAgICAkcGxheWVyMlNjb3JlLnRleHQocGxheWVyVHdvU2NvcmUpO1xuXG4gICAgICAkcDFPdmVyYWxsRGlzdGFuY2UudGV4dChwbGF5ZXJPbmVPdmVyYWxsRGlzdGFuY2UpO1xuICAgICAgJHAyT3ZlcmFsbERpc3RhbmNlLnRleHQocGxheWVyVHdvT3ZlcmFsbERpc3RhbmNlKTtcblxuICAgICAgaWYgKHBsYXllck9uZVNjb3JlID4gcGxheWVyVHdvU2NvcmUpIHtcbiAgICAgICAgd2lubmVyID0gJ1BsYXllciBPbmUnO1xuICAgICAgfSBlbHNlIGlmIChwbGF5ZXJPbmVTY29yZSA9PT0gcGxheWVyVHdvU2NvcmUpIHtcbiAgICAgICAgd2lubmVyID0gJ0l0XFwncyBhIFRpZSEnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2lubmVyID0gJ1BsYXllciBUd28nO1xuICAgICAgfVxuICAgICAgJHdpbm5lci50ZXh0KHdpbm5lcik7XG4gICAgICAkcGxheUFnYWluQnV0dG9uLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgJGVuZE9mR2FtZS5oaWRlKCk7XG4gICAgICAgICR3ZWxjb21lLnNob3coKTtcbiAgICAgICAgcm91bmROdW1iZXIgPSAwO1xuICAgICAgICBwbGF5ZXJPbmVPdmVyYWxsRGlzdGFuY2UgPSAwO1xuICAgICAgICBwbGF5ZXJUd29PdmVyYWxsRGlzdGFuY2UgPSAwO1xuICAgICAgICBwbGF5ZXJPbmVTY29yZSA9IDA7XG4gICAgICAgIHBsYXllclR3b1Njb3JlID0gMDtcbiAgICAgIH0pO1xuXG4gICAgfSBlbHNlIHtcblxuICAgICAgY29uc29sZS5sb2cocm91bmROdW1iZXIpO1xuICAgICAgcm91bmRRdWVzdGlvbk5hbWUgPSBxdWVzdGlvbnNBcnJheVtyb3VuZE51bWJlcl0ubmFtZTtcbiAgICAgIHBsYXllcjFUdXJuID0gdHJ1ZTtcbiAgICAgICRyb3VuZFF1ZXN0aW9uLnRleHQocm91bmRRdWVzdGlvbk5hbWUpO1xuXG4gICAgICBzZXRUaW1lb3V0KCAoKSA9PiB7XG4gICAgICAgICRxdWVzdGlvbi5jc3Moe1xuICAgICAgICAgICdkaXNwbGF5JzogJ2lubGluZSdcbiAgICAgICAgfSk7XG4gICAgICB9LCAyNTApO1xuICAgIH1cbiAgfSk7XG5cbn0pO1xuIl19
