"use strict";$(function(){console.log("JS Loaded");var o=$(".map"),t=$(".welcome"),n=$(".map-select"),e=$(".chosen-map"),a=$(".quiz-select"),i=$(".chosen-quiz"),c=$(".start-game-button"),l=$(".question"),s=$(".round-question"),r=$(".start-round-button"),u=$(".player-one-flag"),g=$(".player-two-flag"),h=$(".player-twos-turn"),m=$(".player-twos-turn-button"),y=$(".answer-location"),d=$(".end-of-round"),L=$(".p1-distance-away"),p=$(".p2-distance-away"),x=$(".player-1-score"),f=$(".player-2-score"),w=$(".next-round-button"),v=$(".end-of-game"),k=$(".p1-overall-distance-from-targets"),q=$(".p2-overall-distance-from-targets"),M=$(".winner"),S=$(".play-again-button"),C=null,T=null,b=null,P=0,F=0,G=0,A=0,B=!0,z=0,O=0,V=0,X=0,Y=0,H=!1,I=0,J=0,K=0,R=0,j="",D={easy:[{name:"The O2 Centre",xLocation:82,yLocation:58},{name:"Buckingham Palace",xLocation:29,yLocation:60},{name:"Kings Cross Station",xLocation:37,yLocation:30},{name:"General Assembly",xLocation:54,yLocation:45},{name:"Big Ben",xLocation:36,yLocation:61}],medium:[{name:"Lord's Cricket Ground",xLocation:19,yLocation:32},{name:"Chelsea FC",xLocation:11,yLocation:81},{name:"Charlton FC",xLocation:95,yLocation:76},{name:"Lee Valley Velodrome",xLocation:74,yLocation:12}],hard:[{name:"Baker Street Station",xLocation:25,yLocation:38},{name:"Green Park Station",xLocation:29,yLocation:54},{name:"Farringdon Station",xLocation:43,yLocation:41},{name:"Angel Station",xLocation:43,yLocation:29},{name:"Camden Town Station",xLocation:28,yLocation:22}],veryHard:[{name:"Granary Square",xLocation:36,yLocation:26},{name:"Finsbury Square",xLocation:50,yLocation:40},{name:"Grosvenor Square",xLocation:26,yLocation:49},{name:"Lincoln Inn's Fields",xLocation:39,yLocation:45},{name:"Russell Square",xLocation:35,yLocation:39}]},E=0;setTimeout(function(){t.show(),n.on("change",function(t){T=$(t.target).val();var n=$(".map-select option[value="+T+"]").html();e.text(n),o.removeAttr("class").addClass("map").addClass(T)}),a.on("change",function(o){C=$(o.target).val();var t=$(".quiz-select option[value="+C+"]").html();i.text(t),E=D[C],console.log(C)})},1e3),c.on("click",function(){if(console.log("clickety click!"),!T||!C)return!1;console.log(t),t.hide(),b=E[z].name,setTimeout(function(){s.text(b),console.log(b),l.show()},250)}),r.on("click",function(){l.hide(),H=!0}),o.on("click",function(t){if(!0===H)if(!0===B){P=t.pageX-$(t.target).position().left,F=t.pageY-$(t.target).position().top;var n=P/o.width()*100,e=F/o.height()*100;console.log(n),console.log(e),console.log("questions array [0]",E[0]);var a=n-E[z].xLocation,i=e-E[z].yLocation;O=Math.floor(Math.sqrt(Math.pow(a,2)+Math.pow(i,2))),u.css({left:n+"%",top:e+"%",display:"inline"}),h.show(),H=!1,B=!1}else if(!1===B){G=t.pageX-$(t.target).position().left,A=t.pageY-$(t.target).position().top;var c=Math.round(G/o.width()*100),l=Math.round(A/o.height()*100);console.log(c),console.log(l);var s=c-E[z].xLocation,r=l-E[z].yLocation;V=Math.floor(Math.sqrt(Math.pow(s,2)+Math.pow(r,2))),g.css({left:c+"%",top:l+"%",display:"inline"}),O<V?(console.log("player 1 wins this round!"),I++):O===V?console.log("its a tie!"):(console.log("player 2 wins this round!"),J++),X=1e3/6*O,Y=1e3/6*V,console.log("Player 1 clicked "+X+"m away from the target"),console.log("Player 2 clicked "+Y+"m away from the target"),setTimeout(function(){y.css({left:E[z].xLocation-$(t.target).position().left+"%",top:E[z].yLocation-$(t.target).position().top+"%",display:"inline"})},1e3),setTimeout(function(){H=!1,d.show(),X=Math.round(X),Y=Math.round(Y),console.log(X),console.log(Y),K+=X,R+=Y,L.html(X),p.html(Y),x.text(I),f.text(J),k.text(K),q.text(R)},2e3)}}),m.on("click",function(){H=!0,h.hide()}),w.on("click",function(){d.hide(),y.hide(),u.hide(),g.hide(),console.log("questionsArray length"+E.length),z++,z>=E.length?(console.log("end game sequence"),v.show(),x.text(I),f.text(J),k.text(K),q.text(R),j=I>J?"Player One":"Player Two",M.text(j),S.on("click",function(){v.hide(),t.show()})):(console.log(z),b=E[z].name,B=!0,s.text(b),setTimeout(function(){l.css({display:"inline"})},250))})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwiY29uc29sZSIsImxvZyIsIiRtYXAiLCIkbWFwU2VsZWN0IiwiJHdlbGNvbWUiLCIkY2hvc2VuTWFwIiwiJHF1aXpTZWxlY3QiLCIkY2hvc2VuUXVpeiIsIiRzdGFydEdhbWVCdXR0b24iLCIkcXVlc3Rpb24iLCIkcm91bmRRdWVzdGlvbiIsIiRzdGFydFJvdW5kQnV0dG9uIiwiJHBsYXllcjFGbGFnIiwiJHBsYXllcjJGbGFnIiwiJHBsYXllcjJzVHVybiIsIiRwbGF5ZXIyc1R1cm5CdXR0b24iLCIkYW5zd2VyTG9jYXRpb24iLCIkZW5kT2ZSb3VuZCIsIiRwMURpc3RhbmNlQXdheSIsIiRwMkRpc3RhbmNlQXdheSIsIiRwbGF5ZXIxU2NvcmUiLCIkcGxheWVyMlNjb3JlIiwiJG5leHRSb3VuZEJ1dHRvbiIsIiRlbmRPZkdhbWUiLCIkcDFPdmVyYWxsRGlzdGFuY2UiLCIkcDJPdmVyYWxsRGlzdGFuY2UiLCJkaWZmaWN1bHR5IiwiY2l0eSIsInJvdW5kUXVlc3Rpb25OYW1lIiwicGxheWVyMUNsaWNrWCIsInBsYXllcjFDbGlja1kiLCJwbGF5ZXIyQ2xpY2tYIiwicGxheWVyMkNsaWNrWSIsInJvdW5kTnVtYmVyIiwicGxheWVyMUh5cG90ZW51c2UiLCJwbGF5ZXIySHlwb3RlbnVzZSIsInBsYXllcjFEaXN0YW5jZUZyb21UYXJnZXRJbk0iLCJwbGF5ZXIyRGlzdGFuY2VGcm9tVGFyZ2V0SW5NIiwibWFwUGxheWFibGUiLCJwbGF5ZXJUd29TY29yZSIsInBsYXllclR3b092ZXJhbGxEaXN0YW5jZSIsIndpbm5lciIsInF1ZXN0aW9uc09iamVjdCIsIm5hbWUiLCJ5TG9jYXRpb24iLCJ4TG9jYXRpb24iLCJoYXJkIiwidmVyeUhhcmQiLCJsYW5kbWFya3MiLCJxdWVzdGlvbnNBcnJheSIsInNldFRpbWVvdXQiLCJzaG93Iiwib24iLCJlIiwidGFyZ2V0IiwidmFsIiwiaHRtbCIsImNob3NlbkNpdHkiLCJyZW1vdmVBdHRyIiwiYWRkQ2xhc3MiLCJjaG9zZW5EaWZmaWN1bHR5IiwidGV4dCIsInBsYXllcjFUdXJuIiwicGxheWVyMUNsaWNrWFBlcmNlbnRPZldpbmRvdyIsImhpZGUiLCJwbGF5ZXIyQ2xpY2tYUGVyY2VudE9mV2luZG93IiwicGxheWVyMmRpc3RhbmNlVG9UYXJnZXRZIiwicGxheWVyMkNsaWNrWVBlcmNlbnRPZldpbmRvdyIsInBhZ2VZIiwicG9zaXRpb24iLCJ0b3AiLCJ3aWR0aCIsInBsYXllcjFDbGlja1lQZXJjZW50T2ZXaW5kb3ciLCJoZWlnaHQiLCJwbGF5ZXIxZGlzdGFuY2VUb1RhcmdldFgiLCJwbGF5ZXJPbmVTY29yZSIsIk1hdGgiLCJmbG9vciIsInNxcnQiLCJwb3ciLCJwbGF5ZXIxZGlzdGFuY2VUb1RhcmdldFkiLCJwYWdlWCIsImxlZnQiLCJyb3VuZCIsInBsYXllcjJkaXN0YW5jZVRvVGFyZ2V0WCIsImRpc3BsYXkiLCIkcGxheUFnYWluQnV0dG9uIiwicGxheWVyT25lT3ZlcmFsbERpc3RhbmNlIiwibGVuZ3RoIiwiJHdpbm5lciIsImNzcyJdLCJtYXBwaW5ncyI6IllBQUFBLEdBQUUsV0FDQUMsUUFBUUMsSUFBSSxZQUFaRCxJQUFBQSxHQUFZRCxFQUFBLFFBRU5HLEVBQVNILEVBQUYsWUFHUEksRUFBYUosRUFBRSxlQURmSyxFQUFhTCxFQUFBLGVBQ2JJLEVBQWVKLEVBQUEsZ0JBQ2ZNLEVBQWVOLEVBQUEsZ0JBQ2ZPLEVBQWdCUCxFQUFBLHNCQUNoQlEsRUFBY1IsRUFBRSxhQUNoQlMsRUFBbUJULEVBQUUsbUJBQ3JCVSxFQUFjVixFQUFBLHVCQUNkVyxFQUFpQlgsRUFBRSxvQkFDbkJZLEVBQUFBLEVBQUFBLG9CQUNBQyxFQUFpQmIsRUFBQSxxQkFDakJjLEVBQWlCZCxFQUFBLDRCQUNqQmUsRUFBa0JmLEVBQUEsb0JBQ2xCZ0IsRUFBQUEsRUFBQUEsaUJBQ0FDLEVBQW9CakIsRUFBQSxxQkFDcEJrQixFQUFnQmxCLEVBQUEscUJBQ2hCbUIsRUFBa0JuQixFQUFFLG1CQUNw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RUFBWStDLE9BQ1poRCxFQUFnQmdELE9BQ2hCcEQsRUFBYW9ELE9BQ2JuRCxFQUFhbUQsT0FDYmhFLFFBQVFDLElBQUksd0JBQTJCZ0QsRUFBZXVDLFFBR3REdkQsSUFHSUEsR0FBZWdCLEVBQWV1QyxRQUNoQ3hGLFFBQVFDLElBQUkscUJBQ1pzQixFQUFXNEIsT0FDWC9CLEVBQWN5QyxLQUFLYyxHQUNuQnRELEVBQWN3QyxLQUFLdEIsR0FFbkJmLEVBQW1CcUMsS0FBSzBCLEdBQ3hCOUQsRUFBbUJvQyxLQUFLckIsR0FHdEJDLEVBREVrQyxFQUFpQnBDLEVBQ1YsYUFFQSxhQUVYa0QsRUFBUTVCLEtBQUtwQixHQUNiNkMsRUFBaUJsQyxHQUFHLFFBQVMsV0FDM0I3QixFQUFXeUMsT0FDWDVELEVBQVMrQyxXQUtYbkQsUUFBUUMsSUFBSWdDLEdBQ1pMLEVBQW9CcUIsRUFBZWhCLEdBQWFVLEtBQ2hEbUIsR0FBYyxFQUNkcEQsRUFBZW1ELEtBQUtqQyxHQUVwQnNCLFdBQVksV0FDVnpDLEVBQVVpRixLQUNSTCxRQUFXLFlBRVoiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJCgoKSA9PiB7XG4gIGNvbnNvbGUubG9nKCdKUyBMb2FkZWQnKTtcblxuICBjb25zdCAkbWFwID0gJCgnLm1hcCcpO1xuXG4gIGNvbnN0ICR3ZWxjb21lID0gJCgnLndlbGNvbWUnKTtcbiAgY29uc3QgJG1hcFNlbGVjdCA9ICQoJy5tYXAtc2VsZWN0Jyk7XG4gIGNvbnN0ICRjaG9zZW5NYXAgPSAkKCcuY2hvc2VuLW1hcCcpXG4gIGNvbnN0ICRxdWl6U2VsZWN0ID0gJCgnLnF1aXotc2VsZWN0Jyk7XG4gIGNvbnN0ICRjaG9zZW5RdWl6ID0gJCgnLmNob3Nlbi1xdWl6Jyk7XG4gIGNvbnN0ICRzdGFydEdhbWVCdXR0b24gPSAkKCcuc3RhcnQtZ2FtZS1idXR0b24nKTtcbiAgY29uc3QgJHF1ZXN0aW9uID0gJCgnLnF1ZXN0aW9uJyk7XG4gIGNvbnN0ICRyb3VuZFF1ZXN0aW9uID0gJCgnLnJvdW5kLXF1ZXN0aW9uJyk7XG4gIGNvbnN0ICRzdGFydFJvdW5kQnV0dG9uID0gJCgnLnN0YXJ0LXJvdW5kLWJ1dHRvbicpO1xuICBjb25zdCAkcGxheWVyMUZsYWcgPSAkKCcucGxheWVyLW9uZS1mbGFnJyk7XG4gIGNvbnN0ICRwbGF5ZXIyRmxhZyA9ICQoJy5wbGF5ZXItdHdvLWZsYWcnKTtcbiAgY29uc3QgJHBsYXllcjJzVHVybiA9ICQoJy5wbGF5ZXItdHdvcy10dXJuJyk7XG4gIGNvbnN0ICRwbGF5ZXIyc1R1cm5CdXR0b24gPSAkKCcucGxheWVyLXR3b3MtdHVybi1idXR0b24nKTtcbiAgY29uc3QgJGFuc3dlckxvY2F0aW9uID0gJCgnLmFuc3dlci1sb2NhdGlvbicpO1xuICBjb25zdCAkZW5kT2ZSb3VuZCA9ICQoJy5lbmQtb2Ytcm91bmQnKTtcbiAgY29uc3QgJHAxRGlzdGFuY2VBd2F5ID0gJCgnLnAxLWRpc3RhbmNlLWF3YXknKTtcbiAgY29uc3QgJHAyRGlzdGFuY2VBd2F5ID0gJCgnLnAyLWRpc3RhbmNlLWF3YXknKTtcbiAgY29uc3QgJHBsYXllcjFTY29yZSA9ICQoJy5wbGF5ZXItMS1zY29yZScpO1xuICBjb25zdCAkcGxheWVyMlNjb3JlID0gJCgnLnBsYXllci0yLXNjb3JlJyk7XG4gIGNvbnN0ICRuZXh0Um91bmRCdXR0b24gPSAkKCcubmV4dC1yb3VuZC1idXR0b24nKTtcbiAgY29uc3QgJGVuZE9mR2FtZSA9ICQoJy5lbmQtb2YtZ2FtZScpO1xuICBjb25zdCAkcDFPdmVyYWxsRGlzdGFuY2UgPSAkKCcucDEtb3ZlcmFsbC1kaXN0YW5jZS1mcm9tLXRhcmdldHMnKTtcbiAgY29uc3QgJHAyT3ZlcmFsbERpc3RhbmNlID0gJCgnLnAyLW92ZXJhbGwtZGlzdGFuY2UtZnJvbS10YXJnZXRzJyk7XG4gIGNvbnN0ICR3aW5uZXIgPSAkKCcud2lubmVyJyk7XG4gIGNvbnN0ICRwbGF5QWdhaW5CdXR0b24gPSAkKCcucGxheS1hZ2Fpbi1idXR0b24nKTtcblxuXG5cbiAgbGV0IGRpZmZpY3VsdHkgPSBudWxsO1xuICBsZXQgY2l0eSA9IG51bGw7XG4gIGxldCByb3VuZFF1ZXN0aW9uTmFtZSA9IG51bGw7XG5cbiAgbGV0IHBsYXllcjFDbGlja1ggPSAwO1xuICBsZXQgcGxheWVyMUNsaWNrWSA9IDA7XG4gIGxldCBwbGF5ZXIyQ2xpY2tYID0gMDtcbiAgbGV0IHBsYXllcjJDbGlja1kgPSAwO1xuXG5cbiAgbGV0IHBsYXllcjFUdXJuID0gdHJ1ZTtcbiAgbGV0IHJvdW5kTnVtYmVyID0gMDtcbiAgbGV0IHBsYXllcjFIeXBvdGVudXNlID0gMDtcbiAgbGV0IHBsYXllcjJIeXBvdGVudXNlID0gMDtcbiAgbGV0IHBsYXllcjFEaXN0YW5jZUZyb21UYXJnZXRJbk0gPSAwO1xuICBsZXQgcGxheWVyMkRpc3RhbmNlRnJvbVRhcmdldEluTSA9IDA7XG4gIGxldCBtYXBQbGF5YWJsZSA9IGZhbHNlO1xuXG4gIGxldCBwbGF5ZXJPbmVTY29yZSA9IDA7XG4gIGxldCBwbGF5ZXJUd29TY29yZSA9IDA7XG5cbiAgbGV0IHBsYXllck9uZU92ZXJhbGxEaXN0YW5jZSA9IDA7XG4gIGxldCBwbGF5ZXJUd29PdmVyYWxsRGlzdGFuY2UgPSAwO1xuXG4gIGxldCB3aW5uZXIgPSAnJztcblxuXG5cblxuXG4gIC8vUXVlc3Rpb25zIGFuZCBSb3VuZHNcblxuICAvL0Vhc3kgcXVpelxuICBjb25zdCBxdWVzdGlvbnNPYmplY3QgPSB7XG4gICAgZWFzeTogW1xuICAgICAge1xuICAgICAgICBuYW1lOiAnVGhlIE8yIENlbnRyZScsXG4gICAgICAgIHhMb2NhdGlvbjogODIsXG4gICAgICAgIHlMb2NhdGlvbjogNThcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdCdWNraW5naGFtIFBhbGFjZScsXG4gICAgICAgIHhMb2NhdGlvbjogMjksXG4gICAgICAgIHlMb2NhdGlvbjogNjBcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdLaW5ncyBDcm9zcyBTdGF0aW9uJyxcbiAgICAgICAgeExvY2F0aW9uOiAzNyxcbiAgICAgICAgeUxvY2F0aW9uOiAzMFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ0dlbmVyYWwgQXNzZW1ibHknLFxuICAgICAgICB4TG9jYXRpb246IDU0LFxuICAgICAgICB5TG9jYXRpb246IDQ1XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiAnQmlnIEJlbicsXG4gICAgICAgIHhMb2NhdGlvbjogMzYsXG4gICAgICAgIHlMb2NhdGlvbjogNjFcbiAgICAgIH1cbiAgICBdLFxuICAgIG1lZGl1bTogW1xuICAgICAge1xuICAgICAgICBuYW1lOiAnTG9yZFxcJ3MgQ3JpY2tldCBHcm91bmQnLFxuICAgICAgICB4TG9jYXRpb246IDE5LFxuICAgICAgICB5TG9jYXRpb246IDMyXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiAnQ2hlbHNlYSBGQycsXG4gICAgICAgIHhMb2NhdGlvbjogMTEsXG4gICAgICAgIHlMb2NhdGlvbjogODFcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdDaGFybHRvbiBGQycsXG4gICAgICAgIHhMb2NhdGlvbjogOTUsXG4gICAgICAgIHlMb2NhdGlvbjogNzZcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdMZWUgVmFsbGV5IFZlbG9kcm9tZScsXG4gICAgICAgIHhMb2NhdGlvbjogNzQsXG4gICAgICAgIHlMb2NhdGlvbjogMTJcbiAgICAgIH1cbiAgICBdLFxuICAgIGhhcmQ6IFtcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ0Jha2VyIFN0cmVldCBTdGF0aW9uJyxcbiAgICAgICAgeExvY2F0aW9uOiAyNSxcbiAgICAgICAgeUxvY2F0aW9uOiAzOFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ0dyZWVuIFBhcmsgU3RhdGlvbicsXG4gICAgICAgIHhMb2NhdGlvbjogMjksXG4gICAgICAgIHlMb2NhdGlvbjogNTRcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdGYXJyaW5nZG9uIFN0YXRpb24nLFxuICAgICAgICB4TG9jYXRpb246IDQzLFxuICAgICAgICB5TG9jYXRpb246IDQxXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiAnQW5nZWwgU3RhdGlvbicsXG4gICAgICAgIHhMb2NhdGlvbjogNDMsXG4gICAgICAgIHlMb2NhdGlvbjogMjlcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdDYW1kZW4gVG93biBTdGF0aW9uJyxcbiAgICAgICAgeExvY2F0aW9uOiAyOCxcbiAgICAgICAgeUxvY2F0aW9uOiAyMlxuICAgICAgfVxuICAgIF0sXG4gICAgdmVyeUhhcmQ6IFtcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ0dyYW5hcnkgU3F1YXJlJyxcbiAgICAgICAgeExvY2F0aW9uOiAzNixcbiAgICAgICAgeUxvY2F0aW9uOiAyNlxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ0ZpbnNidXJ5IFNxdWFyZScsXG4gICAgICAgIHhMb2NhdGlvbjogNTAsXG4gICAgICAgIHlMb2NhdGlvbjogNDBcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdHcm9zdmVub3IgU3F1YXJlJyxcbiAgICAgICAgeExvY2F0aW9uOiAyNixcbiAgICAgICAgeUxvY2F0aW9uOiA0OVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ0xpbmNvbG4gSW5uXFwncyBGaWVsZHMnLFxuICAgICAgICB4TG9jYXRpb246IDM5LFxuICAgICAgICB5TG9jYXRpb246IDQ1XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiAnUnVzc2VsbCBTcXVhcmUnLFxuICAgICAgICB4TG9jYXRpb246IDM1LFxuICAgICAgICB5TG9jYXRpb246IDM5XG4gICAgICB9XG4gICAgXVxuICB9O1xuXG4gIGNvbnN0IE5ld3lvcmtMYW5kbWFya3NPYmogPSB7XG4gICAgbGFuZG1hcmtzOiBbXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdXb3JsZCBUcmFkZSBDZW50ZXInLFxuICAgICAgICB4TG9jYXRpb246IDQ5LFxuICAgICAgICB5TG9jYXRpb246IDUwXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiAnRW1waXJlIFN0YXRlIEJ1aWxkaW5nJyxcbiAgICAgICAgeExvY2F0aW9uOiA1OCxcbiAgICAgICAgeUxvY2F0aW9uOiAyM1xuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ1N0YXR1ZSBvZiBMaWJlcnR5JyxcbiAgICAgICAgeExvY2F0aW9uOiAzOCxcbiAgICAgICAgeUxvY2F0aW9uOiA2OVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ0dyYW5kIENlbnRyYWwgU3RhdGlvbicsXG4gICAgICAgIHhMb2NhdGlvbjogNjEsXG4gICAgICAgIHlMb2NhdGlvbjogMTlcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdUaGUgRmxhdGlyb24gQnVpbGRpbmcnLFxuICAgICAgICB4TG9jYXRpb246IDU3LFxuICAgICAgICB5TG9jYXRpb246IDI4XG4gICAgICB9XG4gICAgXVxuICB9O1xuXG4gIC8vIHdoaWNoIHNldCBvZiBxdWVzdGlvbnMgdG8gdXNlP1xuXG4gIGxldCBxdWVzdGlvbnNBcnJheSA9IDA7XG5cbiAgLy9HZXQgdGhlIG5hbWUgb2YgdGhlIGxhbmRtYXJrIGZvciBlYWNoIHF1ZXN0aW9uXG5cblxuICAvL3dlbGNvbWUgcGFnZVxuXG5cbiAgc2V0VGltZW91dCgoKSA9PiB7XG5cblxuXG5cbiAgICAkd2VsY29tZS5zaG93KCk7XG5cbiAgICAkbWFwU2VsZWN0Lm9uKCdjaGFuZ2UnLCAoZSkgPT4ge1xuICAgICAgY2l0eSA9ICQoZS50YXJnZXQpLnZhbCgpO1xuXG4gICAgICBjb25zdCBjaG9zZW5DaXR5ID0gJChgLm1hcC1zZWxlY3Qgb3B0aW9uW3ZhbHVlPSR7Y2l0eX1dYCkuaHRtbCgpO1xuXG4gICAgICAkY2hvc2VuTWFwLnRleHQoY2hvc2VuQ2l0eSk7XG5cbiAgICAgICRtYXAucmVtb3ZlQXR0cignY2xhc3MnKS5hZGRDbGFzcygnbWFwJykuYWRkQ2xhc3MoY2l0eSk7XG4gICAgfSk7XG5cbiAgICAkcXVpelNlbGVjdC5vbignY2hhbmdlJywgKGUpID0+IHtcbiAgICAgIGRpZmZpY3VsdHkgPSAkKGUudGFyZ2V0KS52YWwoKTtcblxuICAgICAgY29uc3QgY2hvc2VuRGlmZmljdWx0eSA9ICQoYC5xdWl6LXNlbGVjdCBvcHRpb25bdmFsdWU9JHtkaWZmaWN1bHR5fV1gKS5odG1sKCk7XG5cbiAgICAgICRjaG9zZW5RdWl6LnRleHQoY2hvc2VuRGlmZmljdWx0eSk7XG5cbiAgICAgIHF1ZXN0aW9uc0FycmF5ID0gcXVlc3Rpb25zT2JqZWN0W2RpZmZpY3VsdHldO1xuXG4gICAgICAvLyAkbWFwLmFkZENsYXNzKHZhbHVlIGZyb20gZHJvcCBkb3duKVxuXG4gICAgICBjb25zb2xlLmxvZyhkaWZmaWN1bHR5KTtcblxuICAgIH0pO1xuICB9LCAxMDAwKTtcblxuICAvL2NsaWNrIHN0YXJ0IGdhbWUgYnV0dG9uIHRvIGhpZGUgdGhlIHdlbGNvbWUgZGl2IGFuZCBzaG93IHRoZSBmaXJzdCBxdWVzdGlvblxuXG4gICRzdGFydEdhbWVCdXR0b24ub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdjbGlja2V0eSBjbGljayEnKTtcbiAgICBpZighY2l0eSB8fCAhZGlmZmljdWx0eSlcbiAgICByZXR1cm4gZmFsc2U7XG5cblxuICAgIGNvbnNvbGUubG9nKCR3ZWxjb21lKTtcbiAgICAkd2VsY29tZS5oaWRlKCk7XG5cbiAgICByb3VuZFF1ZXN0aW9uTmFtZSA9IHF1ZXN0aW9uc0FycmF5W3JvdW5kTnVtYmVyXS5uYW1lO1xuXG5cbiAgICAvLyBxdWVzdGlvbiBkaXYgcG9wcyB1cFxuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAvL2dldCB0aGUgbmFtZSBvZiB0aGUgbGFuZG1hcmsgZnJvbSB0aGUgbmFtZSB2YWx1ZSBpbiB0aGUgb2JqZWN0IGluIHRoZSBhcnJheS5cbiAgICAgICRyb3VuZFF1ZXN0aW9uLnRleHQocm91bmRRdWVzdGlvbk5hbWUpO1xuICAgICAgY29uc29sZS5sb2cocm91bmRRdWVzdGlvbk5hbWUpO1xuICAgICAgJHF1ZXN0aW9uLnNob3coKTtcbiAgICB9LCAyNTApO1xuICB9KTtcblxuXG4gIC8vSGlkZSBxdWVzdGlvbiBkaXZcbiAgJHN0YXJ0Um91bmRCdXR0b24ub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICRxdWVzdGlvbi5oaWRlKCk7XG4gICAgbWFwUGxheWFibGUgPSB0cnVlO1xuICB9KTtcblxuXG5cblxuXG5cbiAgLy9QbGF5ZXIxQ2xpY2sgRXZlbnRcblxuXG5cblxuICAkbWFwLm9uKCdjbGljaycsIChlKSA9PiB7XG4gICAgaWYgKG1hcFBsYXlhYmxlID09PSB0cnVlKSB7XG5cbiAgICAgIGlmIChwbGF5ZXIxVHVybiA9PT0gdHJ1ZSkge1xuXG4gICAgICAgIC8vZmluZCBjbGljayBjb29yZGluYXRlcyBpbiBwaXhlbHNcbiAgICAgICAgLy8gY29uc29sZS5sb2coZS5wYWdlWCk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGUucGFnZVkpO1xuICAgICAgICBwbGF5ZXIxQ2xpY2tYID0gZS5wYWdlWCAtICQoZS50YXJnZXQpLnBvc2l0aW9uKCkubGVmdDtcbiAgICAgICAgcGxheWVyMUNsaWNrWSA9IGUucGFnZVkgLSAkKGUudGFyZ2V0KS5wb3NpdGlvbigpLnRvcDtcblxuICAgICAgICAvL2NvbnZlcnQgcGFnZVggYW5kIHBhZ2VZIHBpeGVscyB0byBwZXJjZW50YWdlIG9mIHBhZ2VcbiAgICAgICAgY29uc3QgcGxheWVyMUNsaWNrWFBlcmNlbnRPZldpbmRvdyA9IChwbGF5ZXIxQ2xpY2tYIC8gJG1hcC53aWR0aCgpKSoxMDA7XG4gICAgICAgIGNvbnN0IHBsYXllcjFDbGlja1lQZXJjZW50T2ZXaW5kb3cgPSAocGxheWVyMUNsaWNrWSAvICRtYXAuaGVpZ2h0KCkpKjEwMDtcblxuICAgICAgICBjb25zb2xlLmxvZyhwbGF5ZXIxQ2xpY2tYUGVyY2VudE9mV2luZG93KTtcbiAgICAgICAgY29uc29sZS5sb2cocGxheWVyMUNsaWNrWVBlcmNlbnRPZldpbmRvdyk7XG5cblxuICAgICAgICAvL0Rpc3RhbmNlIHRvIHRhcmdldFxuICAgICAgICBjb25zb2xlLmxvZygncXVlc3Rpb25zIGFycmF5IFswXScsIHF1ZXN0aW9uc0FycmF5WzBdKTtcbiAgICAgICAgY29uc3QgcGxheWVyMWRpc3RhbmNlVG9UYXJnZXRYID0gIHBsYXllcjFDbGlja1hQZXJjZW50T2ZXaW5kb3cgLSBxdWVzdGlvbnNBcnJheVtyb3VuZE51bWJlcl0ueExvY2F0aW9uO1xuXG5cbiAgICAgICAgY29uc3QgcGxheWVyMWRpc3RhbmNlVG9UYXJnZXRZID0gcGxheWVyMUNsaWNrWVBlcmNlbnRPZldpbmRvdyAtIHF1ZXN0aW9uc0FycmF5W3JvdW5kTnVtYmVyXS55TG9jYXRpb247XG5cblxuICAgICAgICBwbGF5ZXIxSHlwb3RlbnVzZSA9IE1hdGguZmxvb3IoTWF0aC5zcXJ0KE1hdGgucG93KHBsYXllcjFkaXN0YW5jZVRvVGFyZ2V0WCwgMikgKyBNYXRoLnBvdyhwbGF5ZXIxZGlzdGFuY2VUb1RhcmdldFksIDIpKSk7XG5cblxuICAgICAgICAvL2FkZCBwbGF5ZXIgb25lIGZsYWdcblxuICAgICAgICAkcGxheWVyMUZsYWcuY3NzKHtcbiAgICAgICAgICAnbGVmdCc6IHBsYXllcjFDbGlja1hQZXJjZW50T2ZXaW5kb3cgKyAnJScsXG4gICAgICAgICAgJ3RvcCc6IHBsYXllcjFDbGlja1lQZXJjZW50T2ZXaW5kb3cgKyAnJScsXG4gICAgICAgICAgJ2Rpc3BsYXknOiAnaW5saW5lJ1xuICAgICAgICB9KTtcblxuICAgICAgICAvL3JldmVhbCBwbGF5ZXIgMnMgdHVybiBkaXZcblxuICAgICAgICAkcGxheWVyMnNUdXJuLnNob3coKTtcbiAgICAgICAgbWFwUGxheWFibGUgPSBmYWxzZTtcbiAgICAgICAgcGxheWVyMVR1cm4gPSBmYWxzZTtcblxuICAgICAgfSBlbHNlIGlmIChwbGF5ZXIxVHVybiA9PT0gZmFsc2UpIHtcblxuICAgICAgICAvL3BsYXllciAyIGNsaWNrIGNvb3JkaW5hdGVzXG4gICAgICAgIHBsYXllcjJDbGlja1ggPSBlLnBhZ2VYIC0gJChlLnRhcmdldCkucG9zaXRpb24oKS5sZWZ0O1xuICAgICAgICBwbGF5ZXIyQ2xpY2tZID0gZS5wYWdlWSAtICQoZS50YXJnZXQpLnBvc2l0aW9uKCkudG9wO1xuXG4gICAgICAgIC8vY29udmVydCBwbGF5ZXIgMiBjbGljayB0byBwZXJjZW50YWdlXG5cbiAgICAgICAgY29uc3QgcGxheWVyMkNsaWNrWFBlcmNlbnRPZldpbmRvdyA9IE1hdGgucm91bmQoKHBsYXllcjJDbGlja1ggLyAkbWFwLndpZHRoKCkpKjEwMCk7XG4gICAgICAgIGNvbnN0IHBsYXllcjJDbGlja1lQZXJjZW50T2ZXaW5kb3cgPSBNYXRoLnJvdW5kKChwbGF5ZXIyQ2xpY2tZIC8gJG1hcC5oZWlnaHQoKSkqMTAwKTtcblxuICAgICAgICBjb25zb2xlLmxvZyhwbGF5ZXIyQ2xpY2tYUGVyY2VudE9mV2luZG93KTtcbiAgICAgICAgY29uc29sZS5sb2cocGxheWVyMkNsaWNrWVBlcmNlbnRPZldpbmRvdyk7XG5cblxuICAgICAgICAvL3BsYXllciAyIGRpc3RhbmNlIHRvIHRhcmdldFxuXG4gICAgICAgIGNvbnN0IHBsYXllcjJkaXN0YW5jZVRvVGFyZ2V0WCA9ICBwbGF5ZXIyQ2xpY2tYUGVyY2VudE9mV2luZG93IC0gcXVlc3Rpb25zQXJyYXlbcm91bmROdW1iZXJdLnhMb2NhdGlvbjtcblxuICAgICAgICBjb25zdCBwbGF5ZXIyZGlzdGFuY2VUb1RhcmdldFkgPSBwbGF5ZXIyQ2xpY2tZUGVyY2VudE9mV2luZG93IC0gcXVlc3Rpb25zQXJyYXlbcm91bmROdW1iZXJdLnlMb2NhdGlvbjtcblxuICAgICAgICBwbGF5ZXIySHlwb3RlbnVzZSA9IE1hdGguZmxvb3IoTWF0aC5zcXJ0KE1hdGgucG93KHBsYXllcjJkaXN0YW5jZVRvVGFyZ2V0WCwgMikgKyBNYXRoLnBvdyhwbGF5ZXIyZGlzdGFuY2VUb1RhcmdldFksIDIpKSk7XG5cbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2Rpc3RhbmNlIGZyb20gdGFyZ2V0ICcgKyBwbGF5ZXIySHlwb3RlbnVzZSk7XG5cbiAgICAgICAgLy8gYWRkIHBsYXllciAyIGZsYWdcbiAgICAgICAgJHBsYXllcjJGbGFnLmNzcyh7XG4gICAgICAgICAgJ2xlZnQnOiBwbGF5ZXIyQ2xpY2tYUGVyY2VudE9mV2luZG93ICsgJyUnLFxuICAgICAgICAgICd0b3AnOiBwbGF5ZXIyQ2xpY2tZUGVyY2VudE9mV2luZG93ICsgJyUnLFxuICAgICAgICAgICdkaXNwbGF5JzogJ2lubGluZSdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gV2luIHJvdW5kIGxvZ2ljXG4gICAgICAgIGlmIChwbGF5ZXIxSHlwb3RlbnVzZSA8IHBsYXllcjJIeXBvdGVudXNlKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ3BsYXllciAxIHdpbnMgdGhpcyByb3VuZCEnKTtcbiAgICAgICAgICBwbGF5ZXJPbmVTY29yZSArKztcbiAgICAgICAgfSBlbHNlIGlmXG4gICAgICAgIChwbGF5ZXIxSHlwb3RlbnVzZSA9PT0gcGxheWVyMkh5cG90ZW51c2UpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnaXRzIGEgdGllIScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdwbGF5ZXIgMiB3aW5zIHRoaXMgcm91bmQhJyk7XG4gICAgICAgICAgcGxheWVyVHdvU2NvcmUgKys7XG4gICAgICAgIH1cblxuICAgICAgICBwbGF5ZXIxRGlzdGFuY2VGcm9tVGFyZ2V0SW5NID0gKDEwMDAgLyA2KSogcGxheWVyMUh5cG90ZW51c2U7XG4gICAgICAgIHBsYXllcjJEaXN0YW5jZUZyb21UYXJnZXRJbk0gPSAoMTAwMCAvIDYpKiBwbGF5ZXIySHlwb3RlbnVzZTtcblxuICAgICAgICBjb25zb2xlLmxvZygnUGxheWVyIDEgY2xpY2tlZCAnICsgcGxheWVyMURpc3RhbmNlRnJvbVRhcmdldEluTSArICdtIGF3YXkgZnJvbSB0aGUgdGFyZ2V0Jyk7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ1BsYXllciAyIGNsaWNrZWQgJyArIHBsYXllcjJEaXN0YW5jZUZyb21UYXJnZXRJbk0gKyAnbSBhd2F5IGZyb20gdGhlIHRhcmdldCcpO1xuXG5cblxuXG4gICAgICAgIC8vcmV2ZWFsIHRhcmdldCBsb2NhdGlvblxuXG4gICAgICAgIHNldFRpbWVvdXQoICgpID0+IHtcbiAgICAgICAgICAkYW5zd2VyTG9jYXRpb24uY3NzKHtcbiAgICAgICAgICAgICdsZWZ0JzogKHF1ZXN0aW9uc0FycmF5W3JvdW5kTnVtYmVyXS54TG9jYXRpb24pLSAkKGUudGFyZ2V0KS5wb3NpdGlvbigpLmxlZnQgKyAnJScsXG4gICAgICAgICAgICAndG9wJzogKHF1ZXN0aW9uc0FycmF5W3JvdW5kTnVtYmVyXS55TG9jYXRpb24pLSAkKGUudGFyZ2V0KS5wb3NpdGlvbigpLnRvcCArICclJyxcbiAgICAgICAgICAgICdkaXNwbGF5JzogJ2lubGluZSdcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSwgMTAwMCk7XG5cbiAgICAgICAgLy9yZXZlYWwgZW5kIG9mIHJvdW5kIGRpdlxuICAgICAgICBzZXRUaW1lb3V0KCAoKSA9PiB7XG4gICAgICAgICAgbWFwUGxheWFibGUgPSBmYWxzZTtcbiAgICAgICAgICAkZW5kT2ZSb3VuZC5zaG93KCk7XG5cbiAgICAgICAgICBwbGF5ZXIxRGlzdGFuY2VGcm9tVGFyZ2V0SW5NID0gTWF0aC5yb3VuZChwbGF5ZXIxRGlzdGFuY2VGcm9tVGFyZ2V0SW5NKTtcbiAgICAgICAgICBwbGF5ZXIyRGlzdGFuY2VGcm9tVGFyZ2V0SW5NID0gTWF0aC5yb3VuZChwbGF5ZXIyRGlzdGFuY2VGcm9tVGFyZ2V0SW5NKTtcblxuICAgICAgICAgIGNvbnNvbGUubG9nKHBsYXllcjFEaXN0YW5jZUZyb21UYXJnZXRJbk0pO1xuICAgICAgICAgIGNvbnNvbGUubG9nKHBsYXllcjJEaXN0YW5jZUZyb21UYXJnZXRJbk0pO1xuXG4gICAgICAgICAgcGxheWVyT25lT3ZlcmFsbERpc3RhbmNlICs9IHBsYXllcjFEaXN0YW5jZUZyb21UYXJnZXRJbk07XG4gICAgICAgICAgcGxheWVyVHdvT3ZlcmFsbERpc3RhbmNlICs9IHBsYXllcjJEaXN0YW5jZUZyb21UYXJnZXRJbk07XG5cbiAgICAgICAgICAkcDFEaXN0YW5jZUF3YXkuaHRtbChwbGF5ZXIxRGlzdGFuY2VGcm9tVGFyZ2V0SW5NKTtcbiAgICAgICAgICAkcDJEaXN0YW5jZUF3YXkuaHRtbChwbGF5ZXIyRGlzdGFuY2VGcm9tVGFyZ2V0SW5NKTtcblxuICAgICAgICAgICRwbGF5ZXIxU2NvcmUudGV4dChwbGF5ZXJPbmVTY29yZSk7XG4gICAgICAgICAgJHBsYXllcjJTY29yZS50ZXh0KHBsYXllclR3b1Njb3JlKTtcblxuICAgICAgICAgICRwMU92ZXJhbGxEaXN0YW5jZS50ZXh0KHBsYXllck9uZU92ZXJhbGxEaXN0YW5jZSk7XG4gICAgICAgICAgJHAyT3ZlcmFsbERpc3RhbmNlLnRleHQocGxheWVyVHdvT3ZlcmFsbERpc3RhbmNlKTtcblxuXG4gICAgICAgIH0sIDIwMDApO1xuXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHJvdW5kUXVlc3Rpb25OYW1lKTtcblxuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cblxuXG5cblxuXG4gICRwbGF5ZXIyc1R1cm5CdXR0b24ub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgIG1hcFBsYXlhYmxlID0gdHJ1ZTtcbiAgICAkcGxheWVyMnNUdXJuLmhpZGUoKTtcbiAgfSk7XG5cblxuXG4gIC8vY2xpY2sgb24gTmV4dCBSb3VuZCBidXR0b25cbiAgJG5leHRSb3VuZEJ1dHRvbi5vbignY2xpY2snLCAoKSA9PiB7XG5cbiAgICAkZW5kT2ZSb3VuZC5oaWRlKCk7XG4gICAgJGFuc3dlckxvY2F0aW9uLmhpZGUoKTtcbiAgICAkcGxheWVyMUZsYWcuaGlkZSgpO1xuICAgICRwbGF5ZXIyRmxhZy5oaWRlKCk7XG4gICAgY29uc29sZS5sb2coJ3F1ZXN0aW9uc0FycmF5IGxlbmd0aCcgKyAgcXVlc3Rpb25zQXJyYXkubGVuZ3RoKTtcblxuXG4gICAgcm91bmROdW1iZXIrKztcblxuXG4gICAgaWYgKHJvdW5kTnVtYmVyID49IHF1ZXN0aW9uc0FycmF5Lmxlbmd0aCkge1xuICAgICAgY29uc29sZS5sb2coJ2VuZCBnYW1lIHNlcXVlbmNlJyk7XG4gICAgICAkZW5kT2ZHYW1lLnNob3coKTtcbiAgICAgICRwbGF5ZXIxU2NvcmUudGV4dChwbGF5ZXJPbmVTY29yZSk7XG4gICAgICAkcGxheWVyMlNjb3JlLnRleHQocGxheWVyVHdvU2NvcmUpO1xuXG4gICAgICAkcDFPdmVyYWxsRGlzdGFuY2UudGV4dChwbGF5ZXJPbmVPdmVyYWxsRGlzdGFuY2UpO1xuICAgICAgJHAyT3ZlcmFsbERpc3RhbmNlLnRleHQocGxheWVyVHdvT3ZlcmFsbERpc3RhbmNlKTtcblxuICAgICAgaWYgKHBsYXllck9uZVNjb3JlID4gcGxheWVyVHdvU2NvcmUpIHtcbiAgICAgICAgd2lubmVyID0gJ1BsYXllciBPbmUnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2lubmVyID0gJ1BsYXllciBUd28nO1xuICAgICAgfVxuICAgICAgJHdpbm5lci50ZXh0KHdpbm5lcik7XG4gICAgICAkcGxheUFnYWluQnV0dG9uLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgJGVuZE9mR2FtZS5oaWRlKCk7XG4gICAgICAgICR3ZWxjb21lLnNob3coKTtcbiAgICAgIH0pO1xuXG4gICAgfSBlbHNlIHtcblxuICAgICAgY29uc29sZS5sb2cocm91bmROdW1iZXIpO1xuICAgICAgcm91bmRRdWVzdGlvbk5hbWUgPSBxdWVzdGlvbnNBcnJheVtyb3VuZE51bWJlcl0ubmFtZTtcbiAgICAgIHBsYXllcjFUdXJuID0gdHJ1ZTtcbiAgICAgICRyb3VuZFF1ZXN0aW9uLnRleHQocm91bmRRdWVzdGlvbk5hbWUpO1xuXG4gICAgICBzZXRUaW1lb3V0KCAoKSA9PiB7XG4gICAgICAgICRxdWVzdGlvbi5jc3Moe1xuICAgICAgICAgICdkaXNwbGF5JzogJ2lubGluZSdcbiAgICAgICAgfSk7XG4gICAgICB9LCAyNTApO1xuICAgIH1cbiAgfSk7XG5cbn0pO1xuXG5cblxuXG5cblxuLy9JZiBwbGF5ZXIxIGNsaWNrcyBvbiB0aGUgbzIgY29uc29sZS5sb2cgJ0J1bGxzZXllISdcbi8vIGlmIChwbGF5ZXIxQ2xpY2tYUGVyY2VudE9mV2luZG93ID09PSBxdWVzdGlvbnNBcnJheVtyb3VuZE51bWJlcl0ueExvY2F0aW9uICYmIHBsYXllcjFDbGlja1lQZXJjZW50T2ZXaW5kb3cgPT09IHF1ZXN0aW9uc0FycmF5W3JvdW5kTnVtYmVyXS55TG9jYXRpb24pIHtcbi8vICAgY29uc29sZS5sb2coJ2J1bGxzZXllIScpO1xuLy8gfVxuLy9cbi8vIGlmIChwbGF5ZXIxQ2xpY2tYUGVyY2VudE9mV2luZG93ID09PSBidWNraW5naGFtUGFsYWNlT2JqLnhMb2NhdGlvbiAmJiBidWNraW5naGFtUGFsYWNlT2JqLnlMb2NhdGlvbikge1xuLy8gICBjb25zb2xlLmxvZygnQmVoYXZlIFBoaWxsaXAnKTtcbi8vIH1cbiJdfQ==
